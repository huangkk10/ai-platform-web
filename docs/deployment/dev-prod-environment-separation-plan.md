# ğŸš€ é–‹ç™¼/ç”Ÿç”¢ç’°å¢ƒåˆ†é›¢éƒ¨ç½²è¨ˆç•«

## ğŸ“‹ æ¦‚è¿°

**ç›®æ¨™**ï¼šå»ºç«‹é–‹ç™¼ï¼ˆDevelopmentï¼‰å’Œç”Ÿç”¢ï¼ˆProductionï¼‰å…©å¥—ç¨ç«‹åŸ·è¡Œç’°å¢ƒï¼Œä½¿ç”¨ Git åˆ†æ”¯ç®¡ç†ç¨‹å¼ç¢¼ç‰ˆæœ¬ã€‚

### ç’°å¢ƒè¦åŠƒ

| ç’°å¢ƒ | IP | è§’è‰² | Git åˆ†æ”¯ | ç”¨é€” |
|------|-----|------|---------|------|
| **é–‹ç™¼æ©Ÿ (Dev)** | 10.10.172.127 | é–‹ç™¼æ¸¬è©¦ | `develop` | æ–°åŠŸèƒ½é–‹ç™¼ã€æ¸¬è©¦ã€é™¤éŒ¯ |
| **ä¸»ç¶²ç«™ (Prod)** | 10.10.173.29 | ç”Ÿç”¢ç’°å¢ƒ | `main` | æ­£å¼æœå‹™ã€å°å¤–æä¾› |
| **Dify AI (Dev)** | 10.10.172.37 | é–‹ç™¼ç”¨ AI | N/A | é–‹ç™¼ç’°å¢ƒçš„çŸ¥è­˜åº«å’Œå·¥ä½œå®¤ |
| **Dify AI (Prod)** | 10.10.172.37 | ç”Ÿç”¢ç”¨ AI | N/A | ç”Ÿç”¢ç’°å¢ƒçš„çŸ¥è­˜åº«å’Œå·¥ä½œå®¤ |

### ğŸ¯ å·²ç¢ºèªçš„æ¶æ§‹æ±ºç­–

| é …ç›® | æ±ºç­– | èªªæ˜ |
|------|------|------|
| **è³‡æ–™åº«** | âœ… **åˆ†é›¢ç®¡ç†** | é–‹ç™¼/ç”Ÿç”¢å„è‡ªç¨ç«‹è³‡æ–™åº« |
| **Dify AI æœå‹™** | âœ… **åˆ†é›¢ç®¡ç†** | é–‹ç™¼/ç”Ÿç”¢å„è‡ªç¨ç«‹çŸ¥è­˜åº«å’Œå·¥ä½œå®¤ |
| **Git åˆ†æ”¯** | âœ… **develop/main** | é–‹ç™¼ç”¨ developï¼Œç”Ÿç”¢ç”¨ main |

### æ¶æ§‹åœ–ï¼ˆå®Œæ•´ç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Git Repository (GitHub)                               â”‚
â”‚                                                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚     â”‚   develop branch    â”‚ â”€â”€PRâ”€â”€â–¶â”‚     main branch     â”‚                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                â”‚
                 â”‚ git pull                       â”‚ git pull
                 â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     é–‹ç™¼æ©Ÿ 10.10.172.127             â”‚  â”‚     ç”Ÿç”¢æ©Ÿ 10.10.173.29              â”‚
â”‚     (develop branch)                â”‚  â”‚     (main branch)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Web æ‡‰ç”¨æœå‹™                  â”‚  â”‚  â”‚  â”‚  Web æ‡‰ç”¨æœå‹™                  â”‚  â”‚
â”‚  â”‚  â€¢ Django    â€¢ Celery         â”‚  â”‚  â”‚  â”‚  â€¢ Django    â€¢ Celery         â”‚  â”‚
â”‚  â”‚  â€¢ React     â€¢ Redis          â”‚  â”‚  â”‚  â”‚  â€¢ React     â€¢ Redis          â”‚  â”‚
â”‚  â”‚  â€¢ Nginx                      â”‚  â”‚  â”‚  â”‚  â€¢ Nginx                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                      â”‚  â”‚              â”‚                      â”‚
â”‚              â”‚ localhost            â”‚  â”‚              â”‚ localhost            â”‚
â”‚              â–¼                      â”‚  â”‚              â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL (é–‹ç™¼)             â”‚  â”‚  â”‚  â”‚  PostgreSQL (ç”Ÿç”¢)             â”‚  â”‚
â”‚  â”‚  DB: ai_platform_dev          â”‚  â”‚  â”‚  â”‚  DB: ai_platform              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚              â”‚                      â”‚  â”‚              â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                        â”‚
               â”‚ API å‘¼å«                               â”‚ API å‘¼å«
               â–¼                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Dify AI (é–‹ç™¼) 10.10.172.37     â”‚  â”‚     Dify AI (ç”Ÿç”¢) 10.10.172.37     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š çŸ¥è­˜åº« (Development)            â”‚  â”‚  ğŸ“š çŸ¥è­˜åº« (Production)             â”‚
â”‚  â”œâ”€â”€ Protocol Known Issue (Dev)    â”‚  â”‚  â”œâ”€â”€ Protocol Known Issue (Prod)   â”‚
â”‚  â”œâ”€â”€ Protocol Guide (Dev)          â”‚  â”‚  â”œâ”€â”€ Protocol Guide (Prod)         â”‚
â”‚  â”œâ”€â”€ RVT Guide (Dev)               â”‚  â”‚  â”œâ”€â”€ RVT Guide (Prod)              â”‚
â”‚  â””â”€â”€ ...                           â”‚  â”‚  â””â”€â”€ ...                           â”‚
â”‚                                     â”‚  â”‚                                     â”‚
â”‚  ğŸ”§ å·¥ä½œå®¤ Apps (Development)       â”‚  â”‚  ğŸ”§ å·¥ä½œå®¤ Apps (Production)        â”‚
â”‚  â”œâ”€â”€ Protocol_known_issue_system   â”‚  â”‚  â”œâ”€â”€ Protocol_known_issue_system   â”‚
â”‚  â”œâ”€â”€ Protocol_Guide                â”‚  â”‚  â”œâ”€â”€ Protocol_Guide                â”‚
â”‚  â”œâ”€â”€ RVT_Guide                     â”‚  â”‚  â”œâ”€â”€ RVT_Guide                     â”‚
â”‚  â”œâ”€â”€ Report_Analyzer_3             â”‚  â”‚  â”œâ”€â”€ Report_Analyzer_3             â”‚
â”‚  â”œâ”€â”€ OCR_Function                  â”‚  â”‚  â”œâ”€â”€ OCR_Function                  â”‚
â”‚  â””â”€â”€ SAF_Intent_Analyzer           â”‚  â”‚  â””â”€â”€ SAF_Intent_Analyzer           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ç¬¬ä¸€éšæ®µï¼šGit åˆ†æ”¯ç­–ç•¥è¨­å®š

### 1.1 åˆ†æ”¯çµæ§‹

```
main (ç”Ÿç”¢åˆ†æ”¯)
 â”‚
 â””â”€â”€ develop (é–‹ç™¼åˆ†æ”¯)
      â”‚
      â”œâ”€â”€ feature/xxx (åŠŸèƒ½åˆ†æ”¯)
      â”œâ”€â”€ bugfix/xxx (ä¿®å¾©åˆ†æ”¯)
      â””â”€â”€ hotfix/xxx (ç·Šæ€¥ä¿®å¾©)
```

### 1.2 åˆ†æ”¯å»ºç«‹ï¼ˆå¦‚æœå°šæœªå­˜åœ¨ï¼‰

```bash
# åœ¨é–‹ç™¼æ©Ÿ (10.10.172.127) åŸ·è¡Œ
cd /home/user/codes/ai-platform-web

# ç¢ºä¿ main åˆ†æ”¯æ˜¯æœ€æ–°çš„
git checkout main
git pull origin main

# å»ºç«‹ develop åˆ†æ”¯ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
git checkout -b develop
git push -u origin develop
```

### 1.3 é–‹ç™¼å·¥ä½œæµç¨‹

```
1. é–‹ç™¼è€…åœ¨ develop åˆ†æ”¯é–‹ç™¼
   â†“
2. é–‹ç™¼å®Œæˆï¼Œæ¸¬è©¦é€šé
   â†“
3. å‰µå»º Pull Request: develop â†’ main
   â†“
4. Code Review + åˆä½µ
   â†“
5. ç”Ÿç”¢æ©Ÿ git pull main æ›´æ–°
```

---

## ğŸ–¥ï¸ ç¬¬äºŒéšæ®µï¼šç”Ÿç”¢æ©Ÿ (10.10.173.29) è¨­å®š

### 2.1 ä¸»æ©Ÿè³‡è¨Š

| é …ç›® | å€¼ |
|------|-----|
| IP | 10.10.173.29 |
| ç”¨æˆ¶ | svd-ai |
| å¯†ç¢¼ | 1 |
| å°ˆæ¡ˆè·¯å¾‘ | ~/ai-platform-web |
| è³‡æ–™åº«è·¯å¾‘ | ~/postgres-db-server (å·²å­˜åœ¨) |

### 2.2 åˆå§‹åŒ–å°ˆæ¡ˆç›®éŒ„

```bash
# SSH é€£ç·šåˆ°ç”Ÿç”¢æ©Ÿ
ssh svd-ai@10.10.173.29
# å¯†ç¢¼: 1

# å‰µå»ºå°ˆæ¡ˆç›®éŒ„
mkdir -p ~/ai-platform-web
cd ~/ai-platform-web

# Clone å°ˆæ¡ˆï¼ˆä½¿ç”¨ main åˆ†æ”¯ï¼‰
git clone https://github.com/huangkk10/ai-platform-web.git .
# æˆ–è€…å¦‚æœæ˜¯ç§æœ‰å€‰åº«ï¼Œéœ€è¦é…ç½® SSH key æˆ–ä½¿ç”¨ token

# ç¢ºä¿åœ¨ main åˆ†æ”¯
git checkout main
git pull origin main
```

### 2.3 ç”Ÿç”¢æ©Ÿå°ˆç”¨é…ç½®æª”æ¡ˆ

#### æ–¹æ¡ˆ Aï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸è¦†è“‹ï¼ˆæ¨è–¦ï¼‰

åœ¨ç”Ÿç”¢æ©Ÿå»ºç«‹ `.env.prod` æª”æ¡ˆï¼š

```bash
# åœ¨ç”Ÿç”¢æ©Ÿå‰µå»ºç’°å¢ƒé…ç½®
cat > ~/ai-platform-web/.env.prod << 'EOF'
# ç”Ÿç”¢ç’°å¢ƒé…ç½® - 10.10.173.29
ENVIRONMENT=production
DEBUG=0

# è³‡æ–™åº«é…ç½®ï¼ˆæœ¬æ©Ÿï¼‰
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ai_platform
DB_USER=postgres
DB_PASSWORD=postgres123

# Redis é…ç½®
REDIS_HOST=redis
REDIS_PORT=6379

# Celery é…ç½®
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# å…¶ä»–ç”Ÿç”¢ç’°å¢ƒé…ç½®
ALLOWED_HOSTS=10.10.173.29,localhost
EOF
```

#### æ–¹æ¡ˆ Bï¼šç”Ÿç”¢æ©Ÿå°ˆç”¨ docker-compose è¦†è“‹æª”æ¡ˆ

åœ¨ç”Ÿç”¢æ©Ÿå»ºç«‹ `docker-compose.override.yml`ï¼š

```yaml
# ~/ai-platform-web/docker-compose.override.yml
# ç”Ÿç”¢æ©Ÿå°ˆç”¨è¦†è“‹é…ç½®

services:
  django:
    environment:
      - DEBUG=0
      - DB_HOST=localhost  # ç”Ÿç”¢æ©Ÿè³‡æ–™åº«åœ¨æœ¬æ©Ÿ
      - ALLOWED_HOSTS=10.10.173.29,localhost

  celery_worker:
    environment:
      - DEBUG=0
      - DB_HOST=localhost

  celery_beat:
    environment:
      - DEBUG=0
      - DB_HOST=localhost
```

### 2.4 ç”Ÿç”¢æ©Ÿ Docker æœå‹™ç®¡ç†

```bash
# åœ¨ç”Ÿç”¢æ©ŸåŸ·è¡Œ
cd ~/ai-platform-web

# å•Ÿå‹•æ‰€æœ‰æœå‹™ï¼ˆè®€å– docker-compose.yml + docker-compose.override.ymlï¼‰
docker compose up -d

# æª¢æŸ¥æœå‹™ç‹€æ…‹
docker compose ps

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f django
```

---

## ğŸ’» ç¬¬ä¸‰éšæ®µï¼šé–‹ç™¼æ©Ÿ (10.10.172.127) è¨­å®š

### 3.1 ä¸»æ©Ÿè³‡è¨Š

| é …ç›® | å€¼ |
|------|-----|
| IP | 10.10.172.127 |
| ç”¨æˆ¶ | user |
| å¯†ç¢¼ | 1234 |
| å°ˆæ¡ˆè·¯å¾‘ | /home/user/codes/ai-platform-web |

### 3.2 åˆ‡æ›åˆ° develop åˆ†æ”¯

```bash
# åœ¨é–‹ç™¼æ©ŸåŸ·è¡Œ
cd /home/user/codes/ai-platform-web

# åˆ‡æ›åˆ° develop åˆ†æ”¯
git checkout develop

# ç¢ºä¿æ˜¯æœ€æ–°çš„
git pull origin develop
```

### 3.3 é–‹ç™¼æ©Ÿé…ç½®ï¼ˆå·²å­˜åœ¨ï¼Œéœ€ç¢ºèªï¼‰

ç›®å‰ `docker-compose.yml` ä¸­çš„é…ç½®ï¼š

```yaml
# å·²ç¶“æŒ‡å‘é ç«¯è³‡æ–™åº« 10.10.173.29
django:
  environment:
    - DEBUG=1                    # é–‹ç™¼æ¨¡å¼
    - DB_HOST=10.10.173.29       # é€£ç·šåˆ°ç”Ÿç”¢æ©Ÿè³‡æ–™åº«
```

### 3.4 é–‹ç™¼æ©Ÿå°ˆç”¨ç’°å¢ƒé…ç½®ï¼ˆå¯é¸ï¼‰

```bash
# å»ºç«‹é–‹ç™¼ç’°å¢ƒé…ç½®
cat > /home/user/codes/ai-platform-web/.env.dev << 'EOF'
# é–‹ç™¼ç’°å¢ƒé…ç½® - 10.10.172.127
ENVIRONMENT=development
DEBUG=1

# è³‡æ–™åº«é…ç½®ï¼ˆé ç«¯ï¼‰
DB_HOST=10.10.173.29
DB_PORT=5432
DB_NAME=ai_platform
DB_USER=postgres
DB_PASSWORD=postgres123

# Redis é…ç½®
REDIS_HOST=redis
REDIS_PORT=6379
EOF
```

---

## ğŸ—„ï¸ ç¬¬å››éšæ®µï¼šè³‡æ–™åº«ç­–ç•¥

### 4.1 æ–¹æ¡ˆæ¯”è¼ƒç¸½è¦½

| æ–¹æ¡ˆ | ç®¡ç†é›£åº¦ | è³‡æ–™å®‰å…¨ | æ¶æ§‹åŒæ­¥ | æ¨è–¦æŒ‡æ•¸ |
|------|---------|---------|---------|---------|
| **å…±ç”¨è³‡æ–™åº«** | â­ ç°¡å–® | âš ï¸ é¢¨éšªé«˜ | âœ… è‡ªå‹• | â­â­â­ |
| **åˆ†é›¢è³‡æ–™åº«** | â­â­ ä¸­ç­‰ | âœ… å®‰å…¨ | âœ… Django Migration | â­â­â­â­â­ |

### 4.2 å…±ç”¨è³‡æ–™åº«æ–¹æ¡ˆ

**å„ªé»**ï¼š
- é–‹ç™¼/ç”Ÿç”¢ä½¿ç”¨ç›¸åŒè³‡æ–™ï¼Œæ–¹ä¾¿æ¸¬è©¦
- ç®¡ç†ç°¡å–®ï¼Œåªéœ€ç¶­è­·ä¸€å€‹è³‡æ–™åº«

**ç¼ºé»**ï¼š
- é–‹ç™¼æ™‚çš„éŒ¯èª¤å¯èƒ½å½±éŸ¿ç”Ÿç”¢è³‡æ–™
- ç„¡æ³•åœ¨é–‹ç™¼ç’°å¢ƒåšç ´å£æ€§æ¸¬è©¦

**é©ç”¨å ´æ™¯**ï¼š
- å°å‹åœ˜éšŠ
- è³‡æ–™é‡ä¸å¤§
- éœ€è¦å³æ™‚åŒæ­¥çš„æƒ…æ³

---

### 4.3 åˆ†é›¢è³‡æ–™åº«æ–¹æ¡ˆï¼ˆæ¨è–¦ï¼‰âœ…

```
é–‹ç™¼æ©Ÿ (10.10.172.127)
â”œâ”€â”€ æ‡‰ç”¨æœå‹™ (develop branch)
â””â”€â”€ é–‹ç™¼è³‡æ–™åº« (æœ¬æ©Ÿ PostgreSQL) â† ai_platform_dev

ç”Ÿç”¢æ©Ÿ (10.10.173.29)
â”œâ”€â”€ æ‡‰ç”¨æœå‹™ (main branch)
â””â”€â”€ ç”Ÿç”¢è³‡æ–™åº« (æœ¬æ©Ÿ PostgreSQL) â† ai_platform
```

#### 4.3.1 ç®¡ç†é›£åº¦åˆ†æ

**â“ åˆ†é›¢è³‡æ–™åº«ç®¡ç†æœƒå¾ˆå›°é›£å—ï¼Ÿ**

**ç­”æ¡ˆï¼šä¸æœƒï¼** Django çš„ Migration ç³»çµ±å°ˆé–€è§£æ±ºé€™å€‹å•é¡Œã€‚

| æ“”å¿ƒçš„å•é¡Œ | Django çš„è§£æ±ºæ–¹æ¡ˆ |
|-----------|------------------|
| æ¶æ§‹è®Šæ›´å¦‚ä½•åŒæ­¥ï¼Ÿ | Migration æª”æ¡ˆéš¨ç¨‹å¼ç¢¼ç‰ˆæ§ |
| å¦‚ä½•è¿½è¹¤è®Šæ›´æ­·å²ï¼Ÿ | `django_migrations` è¡¨è¨˜éŒ„å·²åŸ·è¡Œçš„ migration |
| å¦‚ä½•ç¢ºä¿é †åºæ­£ç¢ºï¼Ÿ | Migration æœ‰ä¾è³´é—œä¿‚ï¼Œè‡ªå‹•æ’åº |
| å¦‚ä½•å›æ»¾è®Šæ›´ï¼Ÿ | `migrate <app> <migration_name>` å¯å›æ»¾ |

#### 4.3.2 Django Migration å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Django Migration æµç¨‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£ é–‹ç™¼æ©Ÿä¿®æ”¹ Model                                            â”‚
â”‚     â””â”€â”€ api/models.py ä¿®æ”¹æ¬„ä½                                   â”‚
â”‚                    â†“                                            â”‚
â”‚  2ï¸âƒ£ ç”Ÿæˆ Migration æª”æ¡ˆ                                         â”‚
â”‚     â””â”€â”€ python manage.py makemigrations                         â”‚
â”‚     â””â”€â”€ ç”¢ç”Ÿ: api/migrations/0025_add_new_field.py              â”‚
â”‚                    â†“                                            â”‚
â”‚  3ï¸âƒ£ åœ¨é–‹ç™¼æ©ŸåŸ·è¡Œ Migration                                       â”‚
â”‚     â””â”€â”€ python manage.py migrate                                â”‚
â”‚     â””â”€â”€ é–‹ç™¼è³‡æ–™åº«æ¶æ§‹æ›´æ–° âœ…                                     â”‚
â”‚                    â†“                                            â”‚
â”‚  4ï¸âƒ£ æäº¤åˆ° Git (develop â†’ main)                                 â”‚
â”‚     â””â”€â”€ git add api/migrations/0025_add_new_field.py            â”‚
â”‚     â””â”€â”€ git commit & push                                       â”‚
â”‚                    â†“                                            â”‚
â”‚  5ï¸âƒ£ ç”Ÿç”¢æ©Ÿ git pull + migrate                                   â”‚
â”‚     â””â”€â”€ git pull origin main                                    â”‚
â”‚     â””â”€â”€ python manage.py migrate                                â”‚
â”‚     â””â”€â”€ ç”Ÿç”¢è³‡æ–™åº«æ¶æ§‹æ›´æ–° âœ…                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3.3 å…·é«”æ“ä½œç¤ºä¾‹

**å ´æ™¯ï¼šåœ¨ `RvtGuide` Model æ–°å¢ä¸€å€‹æ¬„ä½**

```python
# 1ï¸âƒ£ åœ¨é–‹ç™¼æ©Ÿä¿®æ”¹ Model (api/models.py)
class RvtGuide(models.Model):
    title = models.CharField(max_length=300)
    content = models.TextField()
    category = models.CharField(max_length=100, null=True, blank=True)  # æ–°å¢æ¬„ä½
    created_at = models.DateTimeField(auto_now_add=True)
```

```bash
# 2ï¸âƒ£ åœ¨é–‹ç™¼æ©Ÿç”Ÿæˆ Migrationï¼ˆé–‹ç™¼æ©Ÿ 10.10.172.127ï¼‰
docker exec ai-django python manage.py makemigrations api
# è¼¸å‡º: Migrations for 'api':
#   api/migrations/0025_rvtguide_category.py
#     - Add field category to rvtguide

# 3ï¸âƒ£ åœ¨é–‹ç™¼æ©ŸåŸ·è¡Œ Migration
docker exec ai-django python manage.py migrate
# è¼¸å‡º: Applying api.0025_rvtguide_category... OK

# 4ï¸âƒ£ æäº¤åˆ° Git
git add api/migrations/0025_rvtguide_category.py
git commit -m "feat: æ–°å¢ RvtGuide category æ¬„ä½"
git push origin develop

# 5ï¸âƒ£ åˆä½µåˆ° main å¾Œï¼Œåœ¨ç”Ÿç”¢æ©ŸåŸ·è¡Œï¼ˆç”Ÿç”¢æ©Ÿ 10.10.173.29ï¼‰
git pull origin main
docker exec ai-django python manage.py migrate
# è¼¸å‡º: Applying api.0025_rvtguide_category... OK
```

#### 4.3.4 Migration æª”æ¡ˆçš„é‡è¦æ€§

**Migration æª”æ¡ˆå¿…é ˆç´å…¥ç‰ˆæœ¬æ§åˆ¶ï¼**

```
backend/
â””â”€â”€ api/
    â””â”€â”€ migrations/
        â”œâ”€â”€ 0001_initial.py              # åˆå§‹æ¶æ§‹
        â”œâ”€â”€ 0002_add_user_profile.py     # æ–°å¢ç”¨æˆ¶æª”æ¡ˆ
        â”œâ”€â”€ 0003_add_project_model.py    # æ–°å¢å°ˆæ¡ˆæ¨¡å‹
        â”œâ”€â”€ ...
        â””â”€â”€ 0025_rvtguide_category.py    # æœ€æ–°è®Šæ›´
```

**é€™äº›æª”æ¡ˆè¨˜éŒ„äº†ï¼š**
- æ¯æ¬¡æ¶æ§‹è®Šæ›´çš„å…§å®¹
- è®Šæ›´çš„é †åºï¼ˆä¾è³´é—œä¿‚ï¼‰
- å¯ä»¥å‰é€²æˆ–å›æ»¾åˆ°ä»»ä½•ç‰ˆæœ¬

#### 4.3.5 æª¢æŸ¥ Migration ç‹€æ…‹

```bash
# æŸ¥çœ‹æ‰€æœ‰ migration ç‹€æ…‹
docker exec ai-django python manage.py showmigrations

# è¼¸å‡ºç¤ºä¾‹ï¼š
# api
#  [X] 0001_initial
#  [X] 0002_add_user_profile
#  [X] 0003_add_project_model
#  ...
#  [X] 0024_xxx
#  [ ] 0025_rvtguide_category  â† å°šæœªåŸ·è¡Œ

# æŸ¥çœ‹å¾…åŸ·è¡Œçš„ migration
docker exec ai-django python manage.py showmigrations --plan | grep "\[ \]"
```

#### 4.3.6 å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

**Q1: é–‹ç™¼æ©Ÿå’Œç”Ÿç”¢æ©Ÿçš„ Migration ä¸åŒæ­¥æ€éº¼è¾¦ï¼Ÿ**

```bash
# æª¢æŸ¥å…©é‚Šçš„ migration ç‹€æ…‹
docker exec ai-django python manage.py showmigrations

# å¦‚æœç”Ÿç”¢æ©Ÿè½å¾Œï¼Œåªéœ€åŸ·è¡Œ migrate
docker exec ai-django python manage.py migrate

# Django æœƒè‡ªå‹•æ‰¾å‡ºå°šæœªåŸ·è¡Œçš„ migration ä¸¦ä¾åºåŸ·è¡Œ
```

**Q2: å¦‚æœéœ€è¦å›æ»¾ Migrationï¼Ÿ**

```bash
# å›æ»¾åˆ°ç‰¹å®šç‰ˆæœ¬
docker exec ai-django python manage.py migrate api 0024

# é€™æœƒæ’¤éŠ· 0025 çš„è®Šæ›´
```

**Q3: å¦‚æœé–‹ç™¼æ©Ÿå’Œç”Ÿç”¢æ©ŸåŒæ™‚ä¿®æ”¹äº† Modelï¼Ÿ**

```bash
# é€™ç¨®æƒ…æ³æ‡‰è©²é¿å…ï¼
# è¦å‰‡ï¼šæ‰€æœ‰ Model è®Šæ›´éƒ½åœ¨ develop åˆ†æ”¯é€²è¡Œ
# ç”Ÿç”¢æ©ŸåªåŸ·è¡Œ migrateï¼Œä¸åŸ·è¡Œ makemigrations
```

**Q4: å¦‚ä½•è™•ç† Migration è¡çªï¼Ÿ**

```bash
# å¦‚æœå‡ºç¾è¡çªï¼ˆå…©å€‹äººåŒæ™‚ makemigrationsï¼‰
docker exec ai-django python manage.py makemigrations --merge

# é€™æœƒç”¢ç”Ÿä¸€å€‹åˆä½µ migration
```

---

### 4.4 åˆ†é›¢è³‡æ–™åº«çš„å¯¦æ–½æ­¥é©Ÿ

#### Step 1ï¼šåœ¨é–‹ç™¼æ©Ÿæ¢å¾©æœ¬æ©Ÿ PostgreSQL

ä¿®æ”¹é–‹ç™¼æ©Ÿçš„ `docker-compose.yml`ï¼Œå–æ¶ˆè¨»é‡‹ postgres æœå‹™ï¼š

```yaml
# docker-compose.yml (é–‹ç™¼æ©Ÿ 10.10.172.127)

services:
  postgres:
    image: pgvector/pgvector:pg15
    container_name: postgres_db
    restart: unless-stopped
    environment:
      POSTGRES_DB: ai_platform_dev    # ä½¿ç”¨ä¸åŒçš„è³‡æ–™åº«åç¨±
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres123
      PGDATA: /var/lib/postgresql/data/pgdata
      TZ: Asia/Taipei
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-pgvector.sql:/docker-entrypoint-initdb.d/init-pgvector.sql
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - custom_network

  django:
    environment:
      - DB_HOST=postgres_db          # æ”¹ç‚ºæœ¬æ©Ÿ
      - DB_NAME=ai_platform_dev      # é–‹ç™¼è³‡æ–™åº«åç¨±
```

#### Step 2ï¼šåˆå§‹åŒ–é–‹ç™¼è³‡æ–™åº«

```bash
# åœ¨é–‹ç™¼æ©ŸåŸ·è¡Œ
cd /home/user/codes/ai-platform-web

# å•Ÿå‹• postgres å®¹å™¨
docker compose up -d postgres

# ç­‰å¾… postgres å•Ÿå‹•
sleep 10

# é‡å•Ÿ django å®¹å™¨
docker compose restart django

# åŸ·è¡Œæ‰€æœ‰ migration
docker exec ai-django python manage.py migrate

# ï¼ˆå¯é¸ï¼‰å¾ç”Ÿç”¢æ©ŸåŒæ­¥è³‡æ–™
./scripts/sync-db-prod-to-dev.sh
```

#### Step 3ï¼šï¼ˆå¯é¸ï¼‰å¾ç”Ÿç”¢æ©Ÿè¤‡è£½åˆå§‹è³‡æ–™

```bash
#!/bin/bash
# scripts/sync-db-prod-to-dev.sh
# å¾ç”Ÿç”¢æ©ŸåŒæ­¥è³‡æ–™åˆ°é–‹ç™¼æ©Ÿï¼ˆåƒ…åŒæ­¥è³‡æ–™ï¼Œä¸å«æ¶æ§‹ï¼‰

set -e

echo "ğŸ”„ é–‹å§‹å¾ç”Ÿç”¢æ©ŸåŒæ­¥è³‡æ–™..."

# 1. åœ¨ç”Ÿç”¢æ©Ÿå‚™ä»½ï¼ˆåªå‚™ä»½è³‡æ–™ï¼Œä¸å« schemaï¼‰
echo "ğŸ“¦ å‚™ä»½ç”Ÿç”¢è³‡æ–™..."
ssh svd-ai@10.10.173.29 "docker exec postgres_db pg_dump -U postgres --data-only ai_platform > /tmp/prod_data.sql"

# 2. è¤‡è£½åˆ°é–‹ç™¼æ©Ÿ
echo "ğŸ“¥ è¤‡è£½åˆ°é–‹ç™¼æ©Ÿ..."
scp svd-ai@10.10.173.29:/tmp/prod_data.sql /tmp/

# 3. æ¸…ç©ºé–‹ç™¼è³‡æ–™åº«çš„è³‡æ–™ï¼ˆä¿ç•™æ¶æ§‹ï¼‰
echo "ğŸ—‘ï¸ æ¸…ç©ºé–‹ç™¼è³‡æ–™åº«..."
docker exec postgres_db psql -U postgres -d ai_platform_dev -c "TRUNCATE TABLE auth_user CASCADE;"

# 4. æ¢å¾©è³‡æ–™
echo "ğŸ“¤ æ¢å¾©è³‡æ–™..."
docker exec -i postgres_db psql -U postgres ai_platform_dev < /tmp/prod_data.sql

# 5. æ¸…ç†
rm /tmp/prod_data.sql
ssh svd-ai@10.10.173.29 "rm /tmp/prod_data.sql"

echo "âœ… åŒæ­¥å®Œæˆï¼"
```

---

### 4.5 è³‡æ–™åº«åˆ†é›¢å¾Œçš„æ—¥å¸¸å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     è³‡æ–™åº«æ¶æ§‹è®Šæ›´å·¥ä½œæµç¨‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  é–‹ç™¼æ©Ÿ (develop branch)                ç”Ÿç”¢æ©Ÿ (main branch)              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚                                                                          â”‚
â”‚  1. ä¿®æ”¹ Model                                                           â”‚
â”‚     â””â”€â”€ api/models.py                                                    â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚  2. makemigrations                                                       â”‚
â”‚     â””â”€â”€ ç”¢ç”Ÿ migration æª”æ¡ˆ                                               â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚  3. migrate (é–‹ç™¼ DB)                                                     â”‚
â”‚     â””â”€â”€ æ›´æ–°é–‹ç™¼è³‡æ–™åº« âœ…                                                  â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚  4. æ¸¬è©¦åŠŸèƒ½                                                              â”‚
â”‚     â””â”€â”€ ç¢ºèªæ¶æ§‹è®Šæ›´æ­£ç¢º                                                   â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚  5. git commit & push                                                    â”‚
â”‚     â””â”€â”€ åŒ…å« migration æª”æ¡ˆ                                               â”‚
â”‚              â”‚                                                           â”‚
â”‚              â–¼                                                           â”‚
â”‚  6. PR: develop â†’ main                                                   â”‚
â”‚     â””â”€â”€ Code Review                                                      â”‚
â”‚              â”‚                                                           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 7. git pull origin main        â”‚
â”‚                                              â”‚                           â”‚
â”‚                                              â–¼                           â”‚
â”‚                                          8. migrate (ç”Ÿç”¢ DB)            â”‚
â”‚                                              â””â”€â”€ æ›´æ–°ç”Ÿç”¢è³‡æ–™åº« âœ…         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.6 éƒ¨ç½²è…³æœ¬ï¼ˆåŒ…å« Migrationï¼‰

```bash
#!/bin/bash
# scripts/deploy-production.sh
# ç”Ÿç”¢æ©Ÿéƒ¨ç½²è…³æœ¬

set -e

echo "ğŸš€ é–‹å§‹éƒ¨ç½²ç”Ÿç”¢ç’°å¢ƒ..."

# 1. å‚™ä»½è³‡æ–™åº«
echo "ğŸ“¦ å‚™ä»½è³‡æ–™åº«..."
docker exec postgres_db pg_dump -U postgres ai_platform > ~/backups/pre_deploy_$(date +%Y%m%d_%H%M%S).sql

# 2. æ‹‰å–æœ€æ–°ç¨‹å¼ç¢¼
echo "ğŸ“¥ æ‹‰å–æœ€æ–°ç¨‹å¼ç¢¼..."
git pull origin main

# 3. æª¢æŸ¥æ˜¯å¦æœ‰å¾…åŸ·è¡Œçš„ migration
echo "ğŸ” æª¢æŸ¥ Migration ç‹€æ…‹..."
PENDING=$(docker exec ai-django python manage.py showmigrations --plan | grep "\[ \]" | wc -l)

if [ "$PENDING" -gt 0 ]; then
    echo "ğŸ“ ç™¼ç¾ $PENDING å€‹å¾…åŸ·è¡Œçš„ Migration"
    
    # 4. åŸ·è¡Œ migration
    echo "ğŸ”„ åŸ·è¡Œ Migration..."
    docker exec ai-django python manage.py migrate
    
    echo "âœ… Migration åŸ·è¡Œå®Œæˆ"
else
    echo "âœ… æ²’æœ‰å¾…åŸ·è¡Œçš„ Migration"
fi

# 5. é‡å•Ÿæœå‹™
echo "ğŸ”„ é‡å•Ÿæœå‹™..."
docker compose restart django celery_worker celery_beat

# 6. é©—è­‰æœå‹™
echo "ğŸ” é©—è­‰æœå‹™..."
sleep 5
curl -s http://localhost/api/ > /dev/null && echo "âœ… API æœå‹™æ­£å¸¸" || echo "âŒ API æœå‹™ç•°å¸¸"

echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
```

---

### 4.7 è³‡æ–™åº«ç­–ç•¥å»ºè­°ç¸½çµ

| æƒ…å¢ƒ | å»ºè­°æ–¹æ¡ˆ | åŸå›  |
|------|---------|------|
| ç›®å‰éšæ®µï¼ˆåˆæœŸï¼‰ | å…±ç”¨è³‡æ–™åº« | ç°¡å–®å¿«é€Ÿä¸Šç·š |
| åœ˜éšŠæ“´å¤§ | åˆ†é›¢è³‡æ–™åº« | é¿å…é–‹ç™¼å½±éŸ¿ç”Ÿç”¢ |
| éœ€è¦æ¸¬è©¦å±éšªæ“ä½œ | åˆ†é›¢è³‡æ–™åº« | å¯ä»¥æ”¾å¿ƒæ¸¬è©¦ |
| éœ€è¦è³‡æ–™éš”é›¢ | åˆ†é›¢è³‡æ–™åº« | é–‹ç™¼è³‡æ–™å¯ä»¥è„«æ• |

**ğŸ¯ æœ€çµ‚å»ºè­°ï¼šä½¿ç”¨åˆ†é›¢è³‡æ–™åº«æ–¹æ¡ˆ**

- ç®¡ç†è¤‡é›œåº¦å¢åŠ æœ‰é™ï¼ˆDjango Migration è‡ªå‹•è™•ç†ï¼‰
- è³‡æ–™å®‰å…¨æ€§å¤§å¹…æå‡
- å¯ä»¥è‡ªç”±æ¸¬è©¦è€Œä¸å½±éŸ¿ç”Ÿç”¢ç’°å¢ƒ
- ç¬¦åˆæ¥­ç•Œæœ€ä½³å¯¦è¸

---

### 4.8 ç’°å¢ƒé…ç½®å°ç…§è¡¨

| é…ç½®é … | é–‹ç™¼æ©Ÿ (10.10.172.127) | ç”Ÿç”¢æ©Ÿ (10.10.173.29) |
|--------|----------------------|---------------------|
| DB_HOST | `postgres_db` (æœ¬æ©Ÿå®¹å™¨) | `localhost` (æœ¬æ©Ÿå®¹å™¨) |
| DB_NAME | `ai_platform_dev` | `ai_platform` |
| DEBUG | `1` | `0` |
| Branch | `develop` | `main` |

---

### 4.9 Migration é‡è¦è¦å‰‡

```
âš ï¸ é‡è¦è¦å‰‡ï¼š

1. âœ… Migration æª”æ¡ˆå¿…é ˆç´å…¥ Git ç‰ˆæ§
2. âœ… åªåœ¨é–‹ç™¼æ©ŸåŸ·è¡Œ makemigrations
3. âœ… ç”Ÿç”¢æ©ŸåªåŸ·è¡Œ migrateï¼ˆä¸åŸ·è¡Œ makemigrationsï¼‰
4. âŒ ä¸è¦æ‰‹å‹•ä¿®æ”¹ migration æª”æ¡ˆ
5. âŒ ä¸è¦åˆªé™¤å·²åŸ·è¡Œéçš„ migration æª”æ¡ˆ
6. âŒ ä¸è¦åœ¨ç”Ÿç”¢æ©Ÿä¿®æ”¹ Model
```

---

## ğŸ¤– ç¬¬äº”éšæ®µï¼šDify AI æœå‹™åˆ†é›¢

### 5.1 ç‚ºä»€éº¼è¦åˆ†é›¢ Dify æœå‹™ï¼Ÿ

| å•é¡Œ | å…±ç”¨ Dify çš„é¢¨éšª | åˆ†é›¢å¾Œçš„å¥½è™• |
|------|----------------|-------------|
| **çŸ¥è­˜åº«æ¸¬è©¦** | æ¸¬è©¦è³‡æ–™å¯èƒ½æ±¡æŸ“ç”Ÿç”¢çŸ¥è­˜åº« | å¯æ”¾å¿ƒå¢åˆªæ¸¬è©¦è³‡æ–™ |
| **Prompt èª¿æ•´** | ä¿®æ”¹å¯èƒ½å½±éŸ¿ç”Ÿç”¢ AI å›æ‡‰ | é–‹ç™¼ç’°å¢ƒè‡ªç”±å¯¦é©— |
| **API Key ç®¡ç†** | é–‹ç™¼/ç”Ÿç”¢æ··ç”¨åŒä¸€ Key | æ¬Šé™å’Œæµé‡åˆ†é–‹ç®¡ç† |
| **æ¨¡å‹ç‰ˆæœ¬** | ç„¡æ³•æ¸¬è©¦æ–°æ¨¡å‹ | é–‹ç™¼ç’°å¢ƒå…ˆæ¸¬è©¦æ–°æ¨¡å‹ |
| **æ•…éšœéš”é›¢** | é–‹ç™¼æ“ä½œå¯èƒ½å½±éŸ¿ç”Ÿç”¢ | å®Œå…¨ç¨ç«‹ï¼Œäº’ä¸å½±éŸ¿ |

### 5.2 Dify æœå‹™è¦åŠƒ

#### ç›®å‰ç¾ç‹€

```
ç›®å‰ï¼šå…±ç”¨åŒä¸€å° Dify æœå‹™å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Dify AI 10.10.172.37            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  çŸ¥è­˜åº« + å·¥ä½œå®¤ï¼ˆæ··ç”¨ï¼‰        â”‚  â”‚
â”‚  â”‚  â€¢ é–‹ç™¼æ¸¬è©¦éƒ½åœ¨é€™è£¡            â”‚  â”‚
â”‚  â”‚  â€¢ ç”Ÿç”¢æœå‹™ä¹Ÿåœ¨é€™è£¡            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘              â†‘
    é–‹ç™¼æ©Ÿé€£ç·š      ç”Ÿç”¢æ©Ÿé€£ç·š
```

#### ç›®æ¨™æ¶æ§‹

```
ç›®æ¨™ï¼šåŒä¸€å° Dify æœå‹™å™¨ï¼Œä½¿ç”¨ä¸åŒçš„å·¥ä½œå€å’ŒçŸ¥è­˜åº«å€åˆ†é–‹ç™¼/ç”Ÿç”¢

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Dify AI Server 10.10.172.37                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  ï¿½ é–‹ç™¼ç’°å¢ƒ (Development)     â”‚     â”‚  ğŸ”§ ç”Ÿç”¢ç’°å¢ƒ (Production)      â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                               â”‚     â”‚                               â”‚       â”‚
â”‚  â”‚  ğŸ“š çŸ¥è­˜åº« (åŠ  _dev å¾Œç¶´)      â”‚     â”‚  ğŸ“š çŸ¥è­˜åº« (æ­£å¼å‘½å)          â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€ protocol_guide_dev      â”‚     â”‚  â”œâ”€â”€ protocol_guide           â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€ rvt_guide_dev           â”‚     â”‚  â”œâ”€â”€ rvt_guide                â”‚       â”‚
â”‚  â”‚  â””â”€â”€ know_issue_dev          â”‚     â”‚  â””â”€â”€ know_issue               â”‚       â”‚
â”‚  â”‚                               â”‚     â”‚                               â”‚       â”‚
â”‚  â”‚  ğŸ¤– App (åŠ  _dev å¾Œç¶´)         â”‚     â”‚  ğŸ¤– App (æ­£å¼å‘½å)             â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€ Protocol_Guide_dev      â”‚     â”‚  â”œâ”€â”€ Protocol_Guide           â”‚       â”‚
â”‚  â”‚  â”œâ”€â”€ RVT_Guide_dev           â”‚     â”‚  â”œâ”€â”€ RVT_Guide                â”‚       â”‚
â”‚  â”‚  â””â”€â”€ ...å…¶ä»– App_dev          â”‚     â”‚  â””â”€â”€ ...å…¶ä»– App              â”‚       â”‚
â”‚  â”‚                               â”‚     â”‚                               â”‚       â”‚
â”‚  â”‚  ğŸ”‘ ç¨ç«‹çš„ API Keys           â”‚     â”‚  ğŸ”‘ ç¨ç«‹çš„ API Keys            â”‚       â”‚
â”‚  â”‚                               â”‚     â”‚                               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚               â†‘                                     â†‘                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                     â”‚
                â”‚ API å‘¼å«                            â”‚ API å‘¼å«
                â”‚                                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  é–‹ç™¼æ©Ÿ 10.10.172.127  â”‚         â”‚  ç”Ÿç”¢æ©Ÿ 10.10.173.29       â”‚
    â”‚  (develop branch)     â”‚         â”‚  (main branch)            â”‚
    â”‚  DIFY_ENV=development â”‚         â”‚  DIFY_ENV=production      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ§‹èªªæ˜**ï¼š
- âœ… é–‹ç™¼å’Œç”Ÿç”¢å…±ç”¨åŒä¸€å° Dify æœå‹™å™¨ (10.10.172.37)
- âœ… é€é**å‘½åè¦ç¯„**å€åˆ†ï¼šé–‹ç™¼ç”¨ `_dev` å¾Œç¶´ï¼Œç”Ÿç”¢ç”¨æ­£å¼åç¨±
- âœ… æ¯å€‹ç’°å¢ƒæœ‰**ç¨ç«‹çš„ API Key**ï¼Œé¿å…æ··ç”¨
- âœ… çŸ¥è­˜åº«å’Œ App å®Œå…¨ç¨ç«‹ï¼Œäº’ä¸å½±éŸ¿

### 5.3 éœ€è¦åˆ†é›¢çš„ Dify æ‡‰ç”¨æ¸…å–®

æ ¹æ“šç›®å‰ `dify_config_manager.py` çš„é…ç½®ï¼Œä»¥ä¸‹æ‡‰ç”¨éœ€è¦åœ¨å…©å€‹ç’°å¢ƒå„è‡ªå»ºç«‹ï¼š

| App åç¨± | Workspace | ç”¨é€” | å„ªå…ˆç´š |
|---------|-----------|------|--------|
| `Protocol Known Issue System` | Protocol_known_issue_system | Know Issue æŸ¥è©¢ | ğŸ”´ é«˜ |
| `Protocol Guide` | Protocol_Guide | Protocol Assistant | ğŸ”´ é«˜ |
| `RVT Guide` | RVT_Guide | RVT Assistant | ğŸ”´ é«˜ |
| `Report Analyzer 3` | Report_Analyzer_3 | å ±å‘Šåˆ†æ | ğŸŸ¡ ä¸­ |
| `OCR Function` | OCR_Function | åœ–åƒè­˜åˆ¥ | ğŸŸ¡ ä¸­ |
| `SAF Intent Analyzer` | SAF_Intent_Analyzer | æ„åœ–åˆ†æ | ğŸŸ¢ ä½ |
| `SAF Analyzer` | SAF_Analyzer | SAF åˆ†æ | ğŸŸ¢ ä½ |

### 5.4 é…ç½®ç®¡ç†æ–¹æ¡ˆ

#### æ–¹æ¡ˆï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸åˆ‡æ› AI_PC_IP

**åŸç†**ï¼šé€é `settings.yaml` å’Œç’°å¢ƒè®Šæ•¸ï¼Œè®“é–‹ç™¼æ©Ÿå’Œç”Ÿç”¢æ©ŸæŒ‡å‘ä¸åŒçš„ Dify æœå‹™å™¨ã€‚

#### Step 1ï¼šæ›´æ–° `config/settings.yaml` çµæ§‹

```yaml
# config/settings.yaml

# AI æœå‹™å™¨é…ç½®ï¼ˆé–‹ç™¼å’Œç”Ÿç”¢å…±ç”¨åŒä¸€å° Dify æœå‹™å™¨ï¼‰
ai_server:
  # Dify æœå‹™å™¨ IPï¼ˆé–‹ç™¼å’Œç”Ÿç”¢å…±ç”¨ï¼‰
  ai_pc_ip: "10.10.172.37"
  
  # é–‹ç™¼ç’°å¢ƒé…ç½®
  development:
    ai_pc_ip: "10.10.172.37"
    app_suffix: "_dev"           # é–‹ç™¼ç”¨ App åŠ  _dev å¾Œç¶´
    knowledge_suffix: "_dev"     # é–‹ç™¼ç”¨çŸ¥è­˜åº«åŠ  _dev å¾Œç¶´
    description: "é–‹ç™¼ç’°å¢ƒ - ä½¿ç”¨ _dev å¾Œç¶´çš„ App å’ŒçŸ¥è­˜åº«"
  
  # ç”Ÿç”¢ç’°å¢ƒé…ç½®
  production:
    ai_pc_ip: "10.10.172.37"     # èˆ‡é–‹ç™¼ç’°å¢ƒç›¸åŒ
    app_suffix: ""               # ç”Ÿç”¢ç”¨ App ä½¿ç”¨æ­£å¼åç¨±
    knowledge_suffix: ""         # ç”Ÿç”¢ç”¨çŸ¥è­˜åº«ä½¿ç”¨æ­£å¼åç¨±
    description: "ç”Ÿç”¢ç’°å¢ƒ - ä½¿ç”¨æ­£å¼å‘½åçš„ App å’ŒçŸ¥è­˜åº«"
  
  # ç•¶å‰ç’°å¢ƒï¼ˆç”±ç’°å¢ƒè®Šæ•¸æˆ–éƒ¨ç½²æ±ºå®šï¼‰
  current_environment: "development"
```

#### Step 2ï¼šæ›´æ–° `config/config_loader.py`

```python
# config/config_loader.py æ–°å¢å‡½æ•¸

def get_ai_pc_ip_by_environment(self) -> str:
    """
    æ ¹æ“šç•¶å‰ç’°å¢ƒç²å–å°æ‡‰çš„ AI PC IP
    
    æ³¨æ„ï¼šé–‹ç™¼å’Œç”Ÿç”¢å…±ç”¨åŒä¸€å° Dify æœå‹™å™¨ (10.10.172.37)
    å€åˆ†æ–¹å¼æ˜¯é€éä¸åŒçš„ App åç¨±å’Œ API Key
    """
    # 1. ç›´æ¥å¾ç’°å¢ƒè®Šæ•¸ç²å–
    if os.getenv('AI_PC_IP'):
        return os.getenv('AI_PC_IP')
    
    # 2. å¾ settings.yaml ç²å–ï¼ˆé–‹ç™¼/ç”Ÿç”¢éƒ½æ˜¯åŒä¸€å€‹ IPï¼‰
    return self.get('ai_server.ai_pc_ip', '10.10.172.37')


def get_dify_app_suffix(self) -> str:
    """
    ç²å–ç•¶å‰ç’°å¢ƒçš„ App å¾Œç¶´
    é–‹ç™¼ç’°å¢ƒï¼š'_dev'
    ç”Ÿç”¢ç’°å¢ƒï¼š''ï¼ˆç„¡å¾Œç¶´ï¼‰
    """
    environment = os.getenv('DIFY_ENV', 
                           os.getenv('ENVIRONMENT', 'development'))
    
    if environment == 'production':
        return ''
    else:
        return '_dev'
```

#### Step 3ï¼šæ›´æ–° `docker-compose.yml`ï¼ˆé–‹ç™¼æ©Ÿï¼‰

```yaml
# docker-compose.ymlï¼ˆé–‹ç™¼æ©Ÿ 10.10.172.127ï¼‰

services:
  django:
    environment:
      - ENVIRONMENT=development
      - DIFY_ENV=development     # ä½¿ç”¨ _dev å¾Œç¶´çš„ App
      - AI_PC_IP=10.10.172.37
      # ... å…¶ä»–é…ç½®

  celery_worker:
    environment:
      - DIFY_ENV=development     # ä½¿ç”¨ _dev å¾Œç¶´çš„ App
      - AI_PC_IP=10.10.172.37
```

#### Step 4ï¼šå»ºç«‹ `docker-compose.override.yml`ï¼ˆç”Ÿç”¢æ©Ÿï¼‰

```yaml
# docker-compose.override.ymlï¼ˆç”Ÿç”¢æ©Ÿ 10.10.173.29ï¼‰

services:
  django:
    environment:
      - ENVIRONMENT=production
      - DIFY_ENV=production      # ä½¿ç”¨æ­£å¼å‘½åçš„ Appï¼ˆç„¡å¾Œç¶´ï¼‰
      - AI_PC_IP=10.10.172.37    # èˆ‡é–‹ç™¼ç’°å¢ƒç›¸åŒçš„ Dify æœå‹™å™¨

  celery_worker:
    environment:
      - ENVIRONMENT=production
      - DIFY_ENV=production
      - AI_PC_IP=10.10.172.37

  celery_beat:
    environment:
      - ENVIRONMENT=production
      - DIFY_ENV=production
      - AI_PC_IP=10.10.172.37
```

### 5.5 Dify çŸ¥è­˜åº«åˆ†é›¢ç­–ç•¥

#### 5.5.1 çŸ¥è­˜åº«å‘½åè¦ç¯„

**åŒä¸€å° Dify æœå‹™å™¨ (10.10.172.37) ä¸Šé€éå‘½åå€åˆ†ï¼š**

| ç’°å¢ƒ | çŸ¥è­˜åº«å‘½åæ ¼å¼ | ç¯„ä¾‹ |
|------|---------------|------|
| é–‹ç™¼ | `{name}_dev` | `protocol_guide_dev`, `rvt_guide_dev` |
| ç”Ÿç”¢ | `{name}` ï¼ˆæ­£å¼åç¨±ï¼‰ | `protocol_guide`, `rvt_guide` |

#### 5.5.2 çŸ¥è­˜åº«åŒæ­¥ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŸ¥è­˜åº«åŒæ­¥å·¥ä½œæµç¨‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  é–‹ç™¼ç’°å¢ƒ Dify                      ç”Ÿç”¢ç’°å¢ƒ Dify              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                                                â”‚
â”‚  1. å»ºç«‹/ä¿®æ”¹çŸ¥è­˜åº«                                             â”‚
â”‚     â””â”€â”€ protocol_guide_dev                                     â”‚
â”‚              â”‚                                                 â”‚
â”‚              â–¼                                                 â”‚
â”‚  2. æ¸¬è©¦ RAG æ•ˆæœ                                              â”‚
â”‚     â””â”€â”€ ç¢ºèªæª¢ç´¢å“è³ª                                           â”‚
â”‚              â”‚                                                 â”‚
â”‚              â–¼                                                 â”‚
â”‚  3. é©—è­‰ OK                                                    â”‚
â”‚     â””â”€â”€ è¨˜éŒ„é…ç½®åƒæ•¸                                           â”‚
â”‚              â”‚                                                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 4. è¤‡è£½åˆ°ç”Ÿç”¢ç’°å¢ƒ       â”‚
â”‚                                            â””â”€â”€ protocol_guide  â”‚
â”‚                                                                â”‚
â”‚  âš ï¸ çŸ¥è­˜åº«ä¸æœƒè‡ªå‹•åŒæ­¥ï¼Œéœ€è¦æ‰‹å‹•è¤‡è£½                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.5.3 çŸ¥è­˜åº«åŒæ­¥æª¢æŸ¥æ¸…å–®

ç•¶é–‹ç™¼ç’°å¢ƒçŸ¥è­˜åº«é©—è­‰å®Œæˆå¾Œï¼ŒåŒæ­¥åˆ°ç”Ÿç”¢ç’°å¢ƒï¼š

- [ ] å°å‡ºé–‹ç™¼ç’°å¢ƒçŸ¥è­˜åº«æ–‡æª”
- [ ] åœ¨ç”Ÿç”¢ç’°å¢ƒå»ºç«‹ç›¸åŒçµæ§‹çš„çŸ¥è­˜åº«
- [ ] å°å…¥æ–‡æª”åˆ°ç”Ÿç”¢çŸ¥è­˜åº«
- [ ] ç¢ºèª Embedding è¨­å®šä¸€è‡´
- [ ] æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒ RAG æ•ˆæœ
- [ ] æ›´æ–°ç”Ÿç”¢ç’°å¢ƒ App çš„çŸ¥è­˜åº«é€£çµ

### 5.6 Dify å·¥ä½œå®¤ App åˆ†é›¢ç­–ç•¥

#### 5.6.1 App API Key ç®¡ç†

æ¯å€‹ç’°å¢ƒçš„ App éƒ½æœ‰ç¨ç«‹çš„ API Keyï¼š

```python
# é–‹ç™¼ç’°å¢ƒ API Keysï¼ˆç¯„ä¾‹ï¼‰
DEV_API_KEYS = {
    'protocol_known_issue': 'app-dev-xxxxxxxxxxxx',
    'protocol_guide': 'app-dev-xxxxxxxxxxxx',
    'rvt_guide': 'app-dev-xxxxxxxxxxxx',
    # ...
}

# ç”Ÿç”¢ç’°å¢ƒ API Keysï¼ˆç¯„ä¾‹ï¼‰- æ­£å¼å‘½åçš„ App
PROD_API_KEYS = {
    'protocol_known_issue': 'app-prod-xxxxxxxxxxxx',  # Protocol_Known_Issue_System
    'protocol_guide': 'app-prod-xxxxxxxxxxxx',         # Protocol_Guide
    'rvt_guide': 'app-prod-xxxxxxxxxxxx',              # RVT_Guide
    # ...
}
```

#### 5.6.2 é…ç½®ç®¡ç†å™¨æ›´æ–°æ–¹æ¡ˆ

æ›´æ–° `dify_config_manager.py` æ”¯æ´å¤šç’°å¢ƒï¼ˆåŒä¸€å° Dify æœå‹™å™¨ï¼Œä¸åŒ Appï¼‰ï¼š

```python
# library/config/dify_config_manager.py

class DifyConfigManager:
    """Dify é…ç½®ç®¡ç†å™¨ - æ”¯æ´å¤šç’°å¢ƒï¼ˆå…±ç”¨åŒä¸€å° Dify æœå‹™å™¨ï¼‰"""
    
    # å…±ç”¨çš„ Dify æœå‹™å™¨ IP
    DIFY_SERVER_IP = '10.10.172.37'
    
    # é–‹ç™¼ç’°å¢ƒé…ç½®ï¼ˆApp åç¨±åŠ  _dev å¾Œç¶´ï¼‰
    DEV_CONFIGS = {
        'protocol_known_issue': {
            'app_name': 'Protocol_Known_Issue_System_dev',
            'api_key': 'app-dev-xxxxxxxxxxxx',  # é–‹ç™¼ç”¨ App çš„ Key
            'ai_pc_ip': '10.10.172.37',
        },
        'rvt_guide': {
            'app_name': 'RVT_Guide_dev',
            'api_key': 'app-dev-xxxxxxxxxxxx',  # é–‹ç™¼ç”¨ App çš„ Key
            'ai_pc_ip': '10.10.172.37',
        },
        # ... å…¶ä»– App
    }
    
    # ç”Ÿç”¢ç’°å¢ƒé…ç½®ï¼ˆApp ä½¿ç”¨æ­£å¼åç¨±ï¼‰
    PROD_CONFIGS = {
        'protocol_known_issue': {
            'app_name': 'Protocol_Known_Issue_System',
            'api_key': 'app-prod-xxxxxxxxxxxx',  # ç”Ÿç”¢ç”¨ App çš„ Keyï¼ˆå¾…å»ºç«‹ï¼‰
            'ai_pc_ip': '10.10.172.37',          # èˆ‡é–‹ç™¼ç’°å¢ƒç›¸åŒçš„ IP
        },
        'rvt_guide': {
            'app_name': 'RVT_Guide',
            'api_key': 'app-prod-xxxxxxxxxxxx',  # ç”Ÿç”¢ç”¨ App çš„ Keyï¼ˆå¾…å»ºç«‹ï¼‰
            'ai_pc_ip': '10.10.172.37',
        },
        # ... å…¶ä»– App
    }
    
    @classmethod
    def get_config(cls, app_name: str) -> dict:
        """æ ¹æ“šç’°å¢ƒç²å–é…ç½®ï¼ˆDIFY_ENV ç’°å¢ƒè®Šæ•¸ï¼‰"""
        environment = os.getenv('DIFY_ENV', 
                               os.getenv('ENVIRONMENT', 'development'))
        
        if environment == 'production':
            return cls.PROD_CONFIGS.get(app_name, cls.DEV_CONFIGS.get(app_name))
        else:
            return cls.DEV_CONFIGS.get(app_name)
```

### 5.7 Dify åˆ†é›¢å¯¦æ–½æ­¥é©Ÿ

#### Phase 1ï¼šæº–å‚™éšæ®µï¼ˆä¸å½±éŸ¿ç¾æœ‰æœå‹™ï¼‰

```bash
# 1. è¨˜éŒ„ç¾æœ‰çš„æ‰€æœ‰ Dify App é…ç½®
#    - App åç¨±ã€API Keyã€Promptã€çŸ¥è­˜åº«é€£çµ

# 2. æ±ºå®šç”Ÿç”¢ç’°å¢ƒ Dify æœå‹™å™¨
#    - é¸é … Aï¼šåœ¨æ–°ä¸»æ©Ÿå®‰è£ Dify
#    - é¸é … Bï¼šåœ¨åŒä¸€å°å»ºç«‹ç¨ç«‹ç§Ÿæˆ¶/å·¥ä½œå€

# 3. æ›´æ–° settings.yaml é…ç½®çµæ§‹
```

#### Phase 2ï¼šå»ºç«‹ç”Ÿç”¢ç’°å¢ƒ Dify

```bash
# 1. åœ¨ç”Ÿç”¢ Dify æœå‹™å™¨ä¸Šå»ºç«‹ä»¥ä¸‹ Appï¼š
#    â–¡ Protocol Known Issue System (Prod)
#    â–¡ Protocol Guide (Prod)
#    â–¡ RVT Guide (Prod)
#    â–¡ Report Analyzer 3 (Prod)
#    â–¡ OCR Function (Prod)
#    â–¡ SAF Intent Analyzer (Prod)

# 2. è¤‡è£½çŸ¥è­˜åº«åˆ°ç”Ÿç”¢ç’°å¢ƒ

# 3. è¨˜éŒ„æ‰€æœ‰ç”Ÿç”¢ç’°å¢ƒçš„ API Key
```

#### Phase 3ï¼šç¨‹å¼ç¢¼æ›´æ–°

```bash
# 1. æ›´æ–° config/settings.yaml
# 2. æ›´æ–° config/config_loader.py
# 3. æ›´æ–° library/config/dify_config_manager.py
# 4. æ›´æ–° docker-compose.ymlï¼ˆé–‹ç™¼æ©Ÿï¼‰
# 5. å»ºç«‹ docker-compose.override.ymlï¼ˆç”Ÿç”¢æ©Ÿï¼‰
```

#### Phase 4ï¼šæ¸¬è©¦é©—è­‰

```bash
# 1. é–‹ç™¼æ©Ÿæ¸¬è©¦
docker exec ai-django python -c "
from library.config.dify_config_manager import DifyConfigManager
import os
print(f'Environment: {os.getenv(\"DIFY_ENV\", \"development\")}')
print(f'AI PC IP: {DifyConfigManager._get_ai_pc_ip()}')
"

# 2. ç”Ÿç”¢æ©Ÿæ¸¬è©¦
# ï¼ˆéƒ¨ç½²å¾ŒåŸ·è¡Œç›¸åŒæ¸¬è©¦ï¼Œç¢ºèªä½¿ç”¨ç”Ÿç”¢ç’°å¢ƒçš„ Appï¼‰
```

### 5.8 Dify åˆ†é›¢å¾Œçš„ç’°å¢ƒé…ç½®å°ç…§è¡¨

| é…ç½®é … | é–‹ç™¼æ©Ÿ (10.10.172.127) | ç”Ÿç”¢æ©Ÿ (10.10.173.29) |
|--------|----------------------|---------------------|
| ENVIRONMENT | `development` | `production` |
| DIFY_ENV | `development` | `production` |
| AI_PC_IP | `10.10.172.37` | `10.10.172.37` (**ç›¸åŒ**) |
| Dify App å‘½å | `xxx_dev` | `xxx`ï¼ˆæ­£å¼åç¨±ï¼‰ |
| Dify çŸ¥è­˜åº« | `xxx_dev` | `xxx`ï¼ˆæ­£å¼åç¨±ï¼‰ |
| API Key | é–‹ç™¼ç”¨ Key | ç”Ÿç”¢ç”¨ Key |
| Prompt ç‰ˆæœ¬ | å¯¦é©—ç‰ˆ | ç©©å®šç‰ˆ |

### 5.9 Dify åˆ†é›¢æ³¨æ„äº‹é …

```
âš ï¸ é‡è¦æ³¨æ„äº‹é …ï¼ˆåŒä¸€å° Dify æœå‹™å™¨ï¼Œä¸åŒ Appï¼‰ï¼š

1. âœ… ç”Ÿç”¢ç’°å¢ƒ Prompt è®Šæ›´å‰ï¼Œå…ˆåœ¨é–‹ç™¼ç’°å¢ƒï¼ˆ_dev Appï¼‰æ¸¬è©¦
2. âœ… çŸ¥è­˜åº«æ›´æ–°éœ€è¦é›™é‚ŠåŒæ­¥ï¼ˆ_dev å’Œæ­£å¼ç‰ˆä¸æœƒè‡ªå‹•åŒæ­¥ï¼‰
3. âœ… API Key è¦åˆ†é–‹ç®¡ç†ï¼Œé–‹ç™¼ç”¨å’Œç”Ÿç”¢ç”¨ä¸è¦æ··ç”¨
4. âœ… åœ¨ Dify å·¥ä½œå®¤ä¸­æ¸…æ¥šå€åˆ† _dev å’Œæ­£å¼ App
5. âŒ ä¸è¦åœ¨æ­£å¼ App ç›´æ¥å¯¦é©—æ–°åŠŸèƒ½
6. âŒ ä¸è¦ç”¨é–‹ç™¼ API Keyï¼ˆ_dev Appï¼‰é€£æ¥ç”Ÿç”¢ç’°å¢ƒ
7. âŒ ä¸è¦è®“é–‹ç™¼å’Œç”Ÿç”¢å…±ç”¨åŒä¸€å€‹ App æˆ–çŸ¥è­˜åº«
```

---

## ğŸ“ ç¬¬å…­éšæ®µï¼šé…ç½®æ–‡ä»¶æ›´æ–°

### 6.1 æ›´æ–° settings.yamlï¼ˆæ¨™è¨˜ç’°å¢ƒï¼‰

```yaml
# config/settings.yaml

# ç’°å¢ƒè­˜åˆ¥ï¼ˆæ ¹æ“šä¸åŒæ©Ÿå™¨ä¿®æ”¹ï¼‰
environment:
  type: "development"  # æˆ– "production"
  name: "é–‹ç™¼æ©Ÿ"        # æˆ– "ä¸»ç¶²ç«™"

# AI æœå‹™å™¨é…ç½®
ai_server:
  ai_pc_ip: "10.10.172.37"

# Web æœå‹™å™¨é…ç½®
web_server:
  dev_ip: "10.10.172.127"    # é–‹ç™¼æ©Ÿ
  prod_ip: "10.10.173.29"    # ç”Ÿç”¢æ©Ÿ

# è³‡æ–™åº«æœå‹™å™¨é…ç½®
database_server:
  host: "10.10.173.29"       # å…±ç”¨è³‡æ–™åº«
  port: 5432
  database: "ai_platform"
  user: "postgres"
  password: "postgres123"
```

### 6.2 Git å¿½ç•¥ç’°å¢ƒå°ˆç”¨æª”æ¡ˆ

æ›´æ–° `.gitignore`ï¼š

```gitignore
# ç’°å¢ƒå°ˆç”¨é…ç½®ï¼ˆä¸ç´å…¥ç‰ˆæ§ï¼‰
.env.dev
.env.prod
docker-compose.override.yml

# å…¶ä»–
*.pyc
__pycache__/
.vscode/
*.log
```

---

## ğŸ”„ ç¬¬ä¸ƒéšæ®µï¼šæ—¥å¸¸å·¥ä½œæµç¨‹

### 7.1 é–‹ç™¼å·¥ä½œæµç¨‹

```bash
# 1. åœ¨é–‹ç™¼æ©Ÿ (10.10.172.127) é–‹å§‹å·¥ä½œ
cd /home/user/codes/ai-platform-web
git checkout develop
git pull origin develop

# 2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆå¯é¸ï¼‰
git checkout -b feature/new-feature

# 3. é–‹ç™¼ã€æ¸¬è©¦

# 4. æäº¤è®Šæ›´
git add .
git commit -m "feat: æ–°å¢åŠŸèƒ½"
git push origin feature/new-feature

# 5. å‰µå»º Pull Request (GitHub/GitLab)
#    feature/new-feature â†’ develop

# 6. Code Review å¾Œåˆä½µåˆ° develop
```

### 7.2 ç™¼ä½ˆåˆ°ç”Ÿç”¢ç’°å¢ƒ

```bash
# 1. ç¢ºä¿ develop åˆ†æ”¯ç©©å®š
git checkout develop
git pull origin develop

# 2. å‰µå»º Pull Request: develop â†’ main
#    åœ¨ GitHub/GitLab ä¸Šæ“ä½œ

# 3. åˆä½µå¾Œï¼Œåœ¨ç”Ÿç”¢æ©Ÿæ›´æ–°
ssh svd-ai@10.10.173.29
cd ~/ai-platform-web
git pull origin main

# 4. é‡æ–°éƒ¨ç½²
docker compose down
docker compose up -d

# 5. é©—è­‰æœå‹™
docker compose ps
curl http://localhost/api/
```

### 7.3 ç·Šæ€¥ä¿®å¾©æµç¨‹

```bash
# 1. å¾ main å‰µå»º hotfix åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b hotfix/urgent-fix

# 2. ä¿®å¾©å•é¡Œä¸¦æ¸¬è©¦

# 3. ç›´æ¥åˆä½µåˆ° main
git checkout main
git merge hotfix/urgent-fix
git push origin main

# 4. åŒæ™‚åˆä½µåˆ° develop
git checkout develop
git merge hotfix/urgent-fix
git push origin develop

# 5. åœ¨ç”Ÿç”¢æ©Ÿéƒ¨ç½²
ssh svd-ai@10.10.173.29
cd ~/ai-platform-web
git pull origin main
docker compose restart
```

---

## ğŸ“‹ åŸ·è¡Œæª¢æŸ¥æ¸…å–®

### å‰ç½®æº–å‚™

- [ ] ç¢ºèª GitHub/GitLab å€‰åº«å­˜å–æ¬Šé™
- [ ] ç¢ºèª 10.10.173.29 SSH é€£ç·šæ­£å¸¸
- [ ] ç¢ºèª 10.10.173.29 å·²å®‰è£ Docker å’Œ Docker Compose
- [ ] ç¢ºèªè³‡æ–™åº«æœå‹™æ­£å¸¸é‹è¡Œ
- [ ] ç¢ºèª Dify å·¥ä½œå®¤ (10.10.172.37) å­˜å–æ¬Šé™

### ç”Ÿç”¢æ©Ÿè¨­å®š

- [ ] Clone å°ˆæ¡ˆåˆ° ~/ai-platform-web
- [ ] åˆ‡æ›åˆ° main åˆ†æ”¯
- [ ] å‰µå»º docker-compose.override.ymlï¼ˆDB_HOST=localhostï¼‰
- [ ] å‰µå»º .env.prod ç’°å¢ƒé…ç½®
- [ ] è¨­å®š DIFY_ENV=production
- [ ] å•Ÿå‹• Docker æœå‹™
- [ ] é©—è­‰æœå‹™æ­£å¸¸é‹è¡Œ
- [ ] æ¸¬è©¦ Web ä»‹é¢å­˜å–

### é–‹ç™¼æ©Ÿè¨­å®š

- [ ] å‰µå»º develop åˆ†æ”¯
- [ ] åˆ‡æ›åˆ° develop åˆ†æ”¯
- [ ] ç¢ºèª DB_HOST æŒ‡å‘ 10.10.173.29ï¼ˆåˆ†é›¢è³‡æ–™åº«æ¨¡å¼ï¼‰æˆ–æœ¬åœ°
- [ ] å‰µå»º .env.dev ç’°å¢ƒé…ç½®
- [ ] è¨­å®š DIFY_ENV=development
- [ ] é‡å•Ÿ Docker æœå‹™
- [ ] é©—è­‰æœå‹™æ­£å¸¸é‹è¡Œ

### Dify AI æœå‹™åˆ†é›¢

- [ ] åœ¨ Dify å·¥ä½œå®¤å‰µå»ºã€Œé–‹ç™¼ç”¨ã€å·¥ä½œå€ï¼ˆå¦‚å·²æœ‰å‰‡è·³éï¼‰
- [ ] è¤‡è£½æ‰€æœ‰ App ä¸¦åŠ ä¸Š _dev å¾Œç¶´
- [ ] å‰µå»ºé–‹ç™¼ç”¨çŸ¥è­˜åº«ä¸¦åŠ ä¸Š _dev å¾Œç¶´
- [ ] è¨˜éŒ„æ‰€æœ‰é–‹ç™¼ç’°å¢ƒ API Key
- [ ] æ›´æ–° dify_config_manager.py æ”¯æ´ç’°å¢ƒåˆ‡æ›
- [ ] æ¸¬è©¦é–‹ç™¼ç’°å¢ƒ AI åŠŸèƒ½æ­£å¸¸
- [ ] æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒ AI åŠŸèƒ½æ­£å¸¸

### Git å·¥ä½œæµç¨‹

- [ ] æ¸¬è©¦ develop åˆ†æ”¯æäº¤
- [ ] æ¸¬è©¦ Pull Request æµç¨‹
- [ ] æ¸¬è©¦ main åˆ†æ”¯æ›´æ–°
- [ ] æ¸¬è©¦ç”Ÿç”¢æ©Ÿéƒ¨ç½²æµç¨‹

---

## âš ï¸ æ³¨æ„äº‹é …

### è³‡æ–™åº«å®‰å…¨

1. **å…±ç”¨è³‡æ–™åº«é¢¨éšª**
   - é–‹ç™¼æ™‚é¿å…åŸ·è¡Œ DROP TABLEã€TRUNCATE ç­‰å±éšªæ“ä½œ
   - å»ºè­°åœ¨é–‹ç™¼å‰å‚™ä»½é‡è¦è³‡æ–™
   - è€ƒæ…®å»ºç«‹å”¯è®€çš„é–‹ç™¼å¸³è™Ÿ

2. **å¯†ç¢¼ç®¡ç†**
   - ç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨æ›´å¼·çš„å¯†ç¢¼
   - è€ƒæ…®ä½¿ç”¨ Docker Secrets ç®¡ç†æ•æ„Ÿè³‡è¨Š

### ç¶²è·¯é…ç½®

1. **é˜²ç«ç‰†è¦å‰‡**
   - ç¢ºä¿ 10.10.172.127 å¯ä»¥é€£ç·šåˆ° 10.10.173.29:5432
   - ç¢ºä¿ç”Ÿç”¢æ©Ÿ 80 åŸ å°å¤–é–‹æ”¾

2. **DNS/åŸŸå**ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - ç”Ÿç”¢ç’°å¢ƒå¯é…ç½®åŸŸå
   - é–‹ç™¼ç’°å¢ƒä½¿ç”¨ IP å³å¯

### ç‰ˆæœ¬æ§åˆ¶

1. **ä¸è¦åœ¨ç”Ÿç”¢æ©Ÿç›´æ¥ä¿®æ”¹ç¨‹å¼ç¢¼**
   - æ‰€æœ‰è®Šæ›´æ‡‰é€šé Git æµç¨‹
   - ç”Ÿç”¢æ©ŸåªåŸ·è¡Œ `git pull` æ›´æ–°

2. **Migration ç®¡ç†**
   - ç¢ºä¿ database migration åœ¨ develop æ¸¬è©¦é€šé
   - éƒ¨ç½²åˆ°ç”Ÿç”¢å‰æª¢æŸ¥ migration ç‹€æ…‹

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### é–‹ç™¼æ©Ÿ (10.10.172.127)

```bash
# å•Ÿå‹•æœå‹™
docker compose up -d

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f django

# é‡å•Ÿæœå‹™
docker compose restart

# åŸ·è¡Œ Django å‘½ä»¤
docker exec ai-django python manage.py migrate
docker exec ai-django python manage.py shell

# Git æ“ä½œ
git checkout develop
git pull origin develop
git push origin develop
```

### ç”Ÿç”¢æ©Ÿ (10.10.173.29)

```bash
# SSH é€£ç·š
ssh svd-ai@10.10.173.29

# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd ~/ai-platform-web

# æ›´æ–°ç¨‹å¼ç¢¼
git pull origin main

# é‡æ–°éƒ¨ç½²
docker compose down && docker compose up -d

# æª¢æŸ¥æœå‹™
docker compose ps
docker compose logs -f

# è³‡æ–™åº«æ“ä½œï¼ˆæœ¬æ©Ÿï¼‰
docker exec postgres_db psql -U postgres -d ai_platform
```

---

## ğŸ“… é è¨ˆåŸ·è¡Œæ™‚ç¨‹

| éšæ®µ | ä»»å‹™ | é ä¼°æ™‚é–“ |
|------|------|---------|
| 1 | Git åˆ†æ”¯è¨­å®š | 30 åˆ†é˜ |
| 2 | ç”Ÿç”¢æ©Ÿå°ˆæ¡ˆè¨­å®š | 1 å°æ™‚ |
| 3 | é–‹ç™¼æ©Ÿé…ç½®èª¿æ•´ | 30 åˆ†é˜ |
| 4 | è³‡æ–™åº«åˆ†é›¢è¨­å®š | 1 å°æ™‚ |
| 5 | Dify AI æœå‹™åˆ†é›¢ | 2 å°æ™‚ |
| 6 | æ¸¬è©¦é©—è­‰ | 1 å°æ™‚ |
| 7 | æ–‡æª”æ›´æ–° | 30 åˆ†é˜ |

**ç¸½è¨ˆ**ï¼šç´„ 6.5 å°æ™‚

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [è³‡æ–™åº«é·ç§»è¨ˆç•«](./database-migration-plan.md)
- [Docker å®‰è£æŒ‡å—](./docker-installation.md)
- [PostgreSQL è¨­å®šæŒ‡å—](./postgresql-setup.md)

---

**å»ºç«‹æ—¥æœŸ**ï¼š2025-12-11  
**æ›´æ–°æ—¥æœŸ**ï¼š2025-12-12  
**ç‰ˆæœ¬**ï¼šv1.2  
**ä½œè€…**ï¼šAI Platform Team  
**ç‹€æ…‹**ï¼šğŸ“‹ è¨ˆç•«ä¸­ï¼ˆå°šæœªåŸ·è¡Œï¼‰

### ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ |
|------|------|---------|
| v1.0 | 2025-12-11 | åˆå§‹ç‰ˆæœ¬ï¼šGit åˆ†æ”¯ç­–ç•¥ã€ç’°å¢ƒåˆ†é›¢åŸºç¤æ¶æ§‹ |
| v1.1 | 2025-12-11 | æ–°å¢ç¬¬äº”éšæ®µ Dify AI æœå‹™åˆ†é›¢è¦åŠƒã€æ›´æ–°åˆ†é›¢è³‡æ–™åº«èªªæ˜ |
| v1.2 | 2025-12-12 | ç¢ºå®š Dify AI å…±ç”¨åŒä¸€å°æœå‹™å™¨ (10.10.172.37)ï¼Œé€éå‘½åè¦ç¯„å€åˆ†é–‹ç™¼/ç”Ÿç”¢ |
