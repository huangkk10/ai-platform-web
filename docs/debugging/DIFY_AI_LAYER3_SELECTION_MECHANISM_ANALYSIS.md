# Dify AI Layer 3ï¼šæ™ºèƒ½é¸æ“‡æ©Ÿåˆ¶æ·±åº¦åˆ†æ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æª”è©³ç´°è§£æ Dify AI çš„ **Layer 3 æ™ºèƒ½é¸æ“‡æ©Ÿåˆ¶**ï¼Œé€™æ˜¯å°è‡´ã€Œç›¸åŒæŸ¥è©¢è¿”å›ä¸åŒçµæœã€çš„æ ¸å¿ƒåŸå› ã€‚

---

## ğŸ§  Layer 3ï¼šAI æ™ºèƒ½é¸æ“‡æ©Ÿåˆ¶

### ğŸ¯ æ ¸å¿ƒä»»å‹™

ç•¶ Dify AI æ”¶åˆ°å‘é‡æœå°‹çµæœå¾Œï¼ˆä¾†è‡ª Layer 1ï¼‰ï¼Œä¸¦é€šé Threshold éæ¿¾ï¼ˆLayer 2ï¼‰ï¼ŒLayer 3 è² è²¬ï¼š

1. **å¾å¤šå€‹å€™é¸æ–‡æª”ä¸­é¸æ“‡ã€Œæœ€ä½³ã€å¼•ç”¨ä¾†æº**
2. **åŸºæ–¼å°è©±è¨˜æ†¶èª¿æ•´é¸æ“‡ç­–ç•¥**
3. **ç”Ÿæˆæœ€çµ‚çš„ AI å›ç­”**

---

## ğŸ” Layer 3 çš„å…§éƒ¨æ©Ÿåˆ¶ï¼ˆåŸºæ–¼å¯¦é©—æ•¸æ“šæ¨æ¸¬ï¼‰

### æ©Ÿåˆ¶ 1ï¼š**å°è©±è¨˜æ†¶ç³»çµ±ï¼ˆConversation Memoryï¼‰**

#### ğŸ“Š è­‰æ“šä¾†æº
```
Experiment A (ç´”æ·¨å°è©±): 10/10 æˆåŠŸ (100%)
Experiment B (I3C æ±¡æŸ“):  8/10 æˆåŠŸ (80%)
Experiment C (é•·å°è©±):    6/10 æˆåŠŸ (60%)
```

#### ğŸ”¬ è¨˜æ†¶æ©Ÿåˆ¶åˆ†æ

**è¨˜æ†¶å­˜å„²çµæ§‹**ï¼ˆæ¨æ¸¬ï¼‰ï¼š
```json
{
  "conversation_id": "xxx-xxx-xxx",
  "memory": {
    "mentioned_topics": [
      { "topic": "CrystalDiskMark", "count": 3, "last_mention": "2025-11-12 10:30:15" },
      { "topic": "I3C", "count": 10, "last_mention": "2025-11-12 10:35:22" }
    ],
    "selected_documents": [
      { "document_id": "CrystalDiskMark_5", "selection_count": 3 },
      { "document_id": "I3C_guide", "selection_count": 7 }
    ],
    "conversation_context": {
      "dominant_theme": "I3C",  // ä¸»å°ä¸»é¡Œ
      "recent_focus": ["I3C", "ULINK", "Protocol"],
      "topic_weights": {
        "I3C": 0.7,           // æœ€è¿‘é »ç¹æåŠ
        "CrystalDiskMark": 0.3  // è¼ƒå°‘æåŠ
      }
    }
  }
}
```

#### ğŸ¯ è¨˜æ†¶å½±éŸ¿é¸æ“‡çš„æ–¹å¼

1. **ä¸»é¡Œé »ç‡è¿½è¹¤**
   - è¨˜éŒ„æ¯å€‹ä¸»é¡Œè¢«æåŠçš„æ¬¡æ•¸
   - è¨ˆç®—ä¸»é¡Œæ¬Šé‡ï¼ˆæœ€è¿‘æåŠ > æ­·å²æåŠï¼‰
   
2. **æ–‡æª”é¸æ“‡æ­·å²**
   - è¿½è¹¤æ¯å€‹æ–‡æª”è¢«é¸ç‚ºå¼•ç”¨ä¾†æºçš„æ¬¡æ•¸
   - é¿å…éåº¦é‡è¤‡åŒä¸€æ–‡æª”
   
3. **å°è©±è„ˆçµ¡ç†è§£**
   - è­˜åˆ¥ç•¶å‰å°è©±çš„ã€Œä¸»å°ä¸»é¡Œã€
   - åŸºæ–¼ä¸»é¡Œä¸€è‡´æ€§èª¿æ•´é¸æ“‡

---

### æ©Ÿåˆ¶ 2ï¼š**éŸ¿æ‡‰å¤šæ¨£åŒ–ç­–ç•¥ï¼ˆResponse Diversityï¼‰**

#### ğŸ“Š å¯¦é©—è­‰æ“š

**Experiment B (I3C æ±¡æŸ“)**ï¼š
```
æ¸¬è©¦ #1-10:  å•ã€ŒI3C ç›¸é—œèªªæ˜ã€â†’ 10/10 éƒ½é¸ I3C (96.44%)
æ¸¬è©¦ #11:    å•ã€Œcrystaldiskmarkã€â†’ é¸ I3C (85.32%) âŒ éŒ¯èª¤ï¼
æ¸¬è©¦ #12:    å•ã€Œcrystaldiskmarkã€â†’ é¸ CrystalDiskMark (90.74%) âœ…
æ¸¬è©¦ #13:    å•ã€Œcrystaldiskmarkã€â†’ é¸ I3C (85.32%) âŒ
æ¸¬è©¦ #14:    å•ã€Œcrystaldiskmarkã€â†’ é¸ CrystalDiskMark (90.74%) âœ…
æ¸¬è©¦ #15-20: å•ã€Œcrystaldiskmarkã€â†’ 8/10 é¸ CrystalDiskMark
```

#### ğŸ§© å¤šæ¨£åŒ–ç­–ç•¥åˆ†æ

**ç­–ç•¥ 1ï¼šåé‡è¤‡æ©Ÿåˆ¶ï¼ˆAnti-Repetitionï¼‰**

```python
# Dify AI å…§éƒ¨é‚è¼¯ï¼ˆæ¨æ¸¬ï¼‰
def select_document(candidates, conversation_memory):
    """
    é¸æ“‡æ–‡æª”æ™‚è€ƒæ…®é‡è¤‡é¿å…
    """
    # ç²å–æœ€è¿‘ N æ¬¡é¸æ“‡çš„æ–‡æª”
    recent_selections = conversation_memory.get_recent_selections(limit=5)
    
    for candidate in candidates:
        # å¦‚æœé€™å€‹æ–‡æª”å‰›è¢«é¸éï¼Œé™ä½å…¶æ¬Šé‡
        if candidate.document_id in recent_selections:
            candidate.diversity_penalty = -0.1  # æ‡²ç½°æ¬Šé‡
            
            # å¦‚æœé€£çºŒé¸æ“‡ 3 æ¬¡ä»¥ä¸Šï¼Œå¼·åˆ¶é¿å…
            if recent_selections.count(candidate.document_id) >= 3:
                candidate.diversity_penalty = -0.5  # å¼·åˆ¶æ‡²ç½°
        else:
            candidate.diversity_bonus = +0.05  # çå‹µæ–°æ–‡æª”
    
    # é‡æ–°æ’åº
    sorted_candidates = sort_by_adjusted_score(candidates)
    return sorted_candidates[0]
```

**å¯¦éš›è¡Œç‚º**ï¼š
```
Query #11: "crystaldiskmark"
â”œâ”€ å€™é¸æ–‡æª”:
â”‚  1. CrystalDiskMark (90.74%)
â”‚  2. I3C (85.32%)
â”œâ”€ è¨˜æ†¶æª¢æŸ¥:
â”‚  - æœ€è¿‘ 10 æ¬¡éƒ½é¸ I3C
â”‚  - CrystalDiskMark æœªé¸éï¼ˆæ–°é®®åº¦é«˜ï¼‰
â”œâ”€ å¤šæ¨£åŒ–èª¿æ•´:
â”‚  âš ï¸ ç­–ç•¥è¡çªï¼
â”‚  - åˆ†æ•¸å„ªå…ˆ â†’ CrystalDiskMark (90.74%)
â”‚  - å°è©±ä¸€è‡´æ€§ â†’ I3C (ä¸»å°ä¸»é¡Œ)
â”œâ”€ æ±ºç­–:
â”‚  âŒ é¸æ“‡ I3Cï¼ˆå°è©±ä¸€è‡´æ€§å„ªå…ˆï¼‰
```

**ç­–ç•¥ 2ï¼šä¸»é¡Œé€£è²«æ€§ï¼ˆTopic Coherenceï¼‰**

```python
def calculate_topic_coherence(candidate, conversation_memory):
    """
    è¨ˆç®—æ–‡æª”èˆ‡å°è©±ä¸»é¡Œçš„é€£è²«æ€§
    """
    dominant_theme = conversation_memory.get_dominant_theme()
    
    if candidate.topic == dominant_theme:
        # èˆ‡ä¸»å°ä¸»é¡Œä¸€è‡´ï¼Œçå‹µæ¬Šé‡
        coherence_bonus = +0.15
    else:
        # åˆ‡æ›ä¸»é¡Œï¼Œæ‡²ç½°æ¬Šé‡
        coherence_penalty = -0.1
    
    return candidate.score + coherence_bonus_or_penalty
```

**å¯¦éš›è¡Œç‚º**ï¼š
```
Experiment B æ¸¬è©¦ #11:
â”œâ”€ å°è©±ä¸»å°ä¸»é¡Œ: "I3C" (10 æ¬¡é€£çºŒæåŠ)
â”œâ”€ å€™é¸æ–‡æª”:
â”‚  1. CrystalDiskMark (90.74%) â†’ topic: "CrystalDiskMark"
â”‚  2. I3C (85.32%)             â†’ topic: "I3C"
â”œâ”€ ä¸»é¡Œé€£è²«æ€§èª¿æ•´:
â”‚  - CrystalDiskMark: 90.74% - 0.1 (ä¸»é¡Œåˆ‡æ›) = 90.64%
â”‚  - I3C: 85.32% + 0.15 (ä¸»é¡Œä¸€è‡´) = 85.47%
â”œâ”€ âš ï¸ ä»ç„¶å·®è· 5.17%
â”œâ”€ ä½†å°è©±è¨˜æ†¶æ¬Šé‡ > åˆ†æ•¸å·®è·
â””â”€ æœ€çµ‚é¸æ“‡: I3C âŒ
```

---

### æ©Ÿåˆ¶ 3ï¼š**å‹•æ…‹æ¬Šé‡èª¿æ•´ï¼ˆDynamic Weight Adjustmentï¼‰**

#### ğŸ“Š æ¬Šé‡è¨ˆç®—æ¨¡å‹ï¼ˆæ¨æ¸¬ï¼‰

```python
def calculate_final_score(candidate, conversation_memory, query):
    """
    è¨ˆç®—æœ€çµ‚é¸æ“‡åˆ†æ•¸ï¼ˆå¤šå› ç´ åŠ æ¬Šï¼‰
    """
    # åŸºç¤åˆ†æ•¸ï¼ˆä¾†è‡ªå‘é‡æœå°‹ï¼‰
    vector_score = candidate.similarity_score  # ä¾‹å¦‚ï¼š90.74%
    
    # å› ç´  1ï¼šå°è©±è¨˜æ†¶æ¬Šé‡ï¼ˆ0-30%ï¼‰
    memory_weight = calculate_memory_weight(candidate, conversation_memory)
    # ä¾‹å¦‚ï¼šI3C æœ€è¿‘ 10 æ¬¡æåŠ â†’ memory_weight = +10%
    
    # å› ç´  2ï¼šå¤šæ¨£åŒ–æ¬Šé‡ï¼ˆ-5% åˆ° +5%ï¼‰
    diversity_weight = calculate_diversity_weight(candidate, conversation_memory)
    # ä¾‹å¦‚ï¼šé€£çºŒé¸ 3 æ¬¡ â†’ diversity_weight = -5%
    
    # å› ç´  3ï¼šä¸»é¡Œé€£è²«æ€§æ¬Šé‡ï¼ˆ-10% åˆ° +15%ï¼‰
    coherence_weight = calculate_coherence_weight(candidate, conversation_memory)
    # ä¾‹å¦‚ï¼šèˆ‡ä¸»å°ä¸»é¡Œä¸€è‡´ â†’ coherence_weight = +15%
    
    # å› ç´  4ï¼šæŸ¥è©¢ç›¸é—œæ€§æ¬Šé‡ï¼ˆ0-10%ï¼‰
    query_relevance = calculate_query_relevance(candidate, query)
    # ä¾‹å¦‚ï¼šæŸ¥è©¢è©å®Œå…¨åŒ¹é… â†’ query_relevance = +10%
    
    # å› ç´  5ï¼šæ™‚é–“è¡°æ¸›æ¬Šé‡ï¼ˆ-5% åˆ° 0%ï¼‰
    time_decay = calculate_time_decay(candidate, conversation_memory)
    # ä¾‹å¦‚ï¼šæœ€è¿‘ 1 åˆ†é˜å…§é¸é â†’ time_decay = -5%
    
    # æœ€çµ‚åˆ†æ•¸
    final_score = (
        vector_score 
        + memory_weight 
        + diversity_weight 
        + coherence_weight 
        + query_relevance 
        + time_decay
    )
    
    return final_score
```

#### ğŸ¯ å¯¦éš›æ¡ˆä¾‹åˆ†æ

**Case 1: Experiment A (ç´”æ·¨å°è©±) - 100% æˆåŠŸ**

```
Query #1: "crystaldiskmark"
â”œâ”€ å€™é¸æ–‡æª”:
â”‚  1. CrystalDiskMark (90.74%)
â”‚  2. I3C (85.32%)
â”œâ”€ å‹•æ…‹æ¬Šé‡è¨ˆç®—:
â”‚  
â”‚  CrystalDiskMark:
â”‚  - vector_score:      90.74%
â”‚  - memory_weight:     +0%    (ç„¡è¨˜æ†¶)
â”‚  - diversity_weight:  +0%    (ç„¡æ­·å²)
â”‚  - coherence_weight:  +0%    (ç„¡ä¸»é¡Œ)
â”‚  - query_relevance:   +10%   (æŸ¥è©¢è©åŒ¹é…)
â”‚  - time_decay:        0%
â”‚  â†’ Final: 100.74%
â”‚  
â”‚  I3C:
â”‚  - vector_score:      85.32%
â”‚  - memory_weight:     +0%
â”‚  - diversity_weight:  +0%
â”‚  - coherence_weight:  +0%
â”‚  - query_relevance:   +0%    (ä¸åŒ¹é…)
â”‚  - time_decay:        0%
â”‚  â†’ Final: 85.32%
â”‚
â””â”€ æ±ºç­–: CrystalDiskMark âœ… (åˆ†æ•¸å·®è· 15.42%)
```

**Case 2: Experiment B æ¸¬è©¦ #11 (I3C æ±¡æŸ“) - å¤±æ•—**

```
Query #11: "crystaldiskmark"
â”œâ”€ å°è©±è¨˜æ†¶:
â”‚  - æœ€è¿‘ 10 æ¬¡éƒ½å• "I3C ç›¸é—œèªªæ˜"
â”‚  - 10 æ¬¡éƒ½é¸ I3C æ–‡æª”
â”‚  - ä¸»å°ä¸»é¡Œ: "I3C"
â”œâ”€ å€™é¸æ–‡æª”:
â”‚  1. CrystalDiskMark (90.74%)
â”‚  2. I3C (85.32%)
â”œâ”€ å‹•æ…‹æ¬Šé‡è¨ˆç®—:
â”‚  
â”‚  CrystalDiskMark:
â”‚  - vector_score:      90.74%
â”‚  - memory_weight:     +0%      (æœªæåŠé)
â”‚  - diversity_weight:  +5%      (æ–°é®®æ–‡æª”)
â”‚  - coherence_weight:  -10%     (ä¸»é¡Œåˆ‡æ›æ‡²ç½°)
â”‚  - query_relevance:   +10%     (æŸ¥è©¢è©åŒ¹é…)
â”‚  - time_decay:        0%
â”‚  â†’ Final: 95.74%
â”‚  
â”‚  I3C:
â”‚  - vector_score:      85.32%
â”‚  - memory_weight:     +10%     (æœ€è¿‘ 10 æ¬¡æåŠ)
â”‚  - diversity_weight:  -3%      (é€£çºŒé¸æ“‡)
â”‚  - coherence_weight:  +15%     (ä¸»é¡Œä¸€è‡´çå‹µ)
â”‚  - query_relevance:   +0%      (ä¸åŒ¹é…)
â”‚  - time_decay:        -1%      (æœ€è¿‘ 30 ç§’é¸é)
â”‚  â†’ Final: 106.32% âš ï¸
â”‚
â””â”€ æ±ºç­–: I3C âŒ (èª¿æ•´å¾Œ I3C åè¶…ï¼)
```

**Case 3: Experiment C æ¸¬è©¦ #31 (é•·å°è©±) - å¤±æ•—**

```
Query #31: "crystaldiskmark"
â”œâ”€ å°è©±è¨˜æ†¶:
â”‚  - 30 å€‹æŸ¥è©¢ï¼Œæ¶µè“‹ 10+ ä¸»é¡Œ
â”‚  - I3C æåŠ 8 æ¬¡ï¼ŒCrystalDiskMark æåŠ 0 æ¬¡
â”‚  - ä¸»å°ä¸»é¡Œ: "Protocol"ï¼ˆæ³›åŒ–ä¸»é¡Œï¼‰
â”œâ”€ å€™é¸æ–‡æª”:
â”‚  1. CrystalDiskMark (90.74%)
â”‚  2. I3C (85.32%)
â”œâ”€ å‹•æ…‹æ¬Šé‡è¨ˆç®—:
â”‚  
â”‚  CrystalDiskMark:
â”‚  - vector_score:      90.74%
â”‚  - memory_weight:     +0%
â”‚  - diversity_weight:  +5%
â”‚  - coherence_weight:  -5%      (éƒ¨åˆ†ä¸»é¡Œåˆ‡æ›)
â”‚  - query_relevance:   +10%
â”‚  - time_decay:        0%
â”‚  â†’ Final: 100.74%
â”‚  
â”‚  I3C:
â”‚  - vector_score:      85.32%
â”‚  - memory_weight:     +6%      (8 æ¬¡æåŠ)
â”‚  - diversity_weight:  -2%
â”‚  - coherence_weight:  +8%      (éƒ¨åˆ†ä¸»é¡Œç›¸é—œ)
â”‚  - query_relevance:   +0%
â”‚  - time_decay:        -2%
â”‚  â†’ Final: 95.32%
â”‚
â””â”€ æ±ºç­–: CrystalDiskMark âœ… (å·®è· 5.42%ï¼Œå‹‰å¼·é€šé)
```

---

### æ©Ÿåˆ¶ 4ï¼š**æ™‚é–“çª—å£æ•ˆæ‡‰ï¼ˆTime Window Effectï¼‰**

#### ğŸ“Š å¯¦é©—è­‰æ“š

**Experiment B æ™‚é–“åˆ†æ**ï¼š
```
æ¸¬è©¦ #11 (10:30:15): "crystaldiskmark" â†’ I3C âŒ
æ¸¬è©¦ #12 (10:30:45): "crystaldiskmark" â†’ CrystalDiskMark âœ…
æ¸¬è©¦ #13 (10:31:20): "crystaldiskmark" â†’ I3C âŒ
æ¸¬è©¦ #14 (10:31:55): "crystaldiskmark" â†’ CrystalDiskMark âœ…

æ™‚é–“å·®: å¹³å‡ 35 ç§’
```

#### â° æ™‚é–“çª—å£æ©Ÿåˆ¶

```python
def calculate_time_decay(candidate, conversation_memory):
    """
    åŸºæ–¼æ™‚é–“çš„æ¬Šé‡è¡°æ¸›
    """
    last_selection_time = conversation_memory.get_last_selection_time(candidate)
    
    if not last_selection_time:
        return 0  # æœªé¸é
    
    time_diff = current_time - last_selection_time
    
    if time_diff < 30:  # 30 ç§’å…§
        return -5%  # å¼·çƒˆæ‡²ç½°
    elif time_diff < 60:  # 1 åˆ†é˜å…§
        return -3%  # ä¸­åº¦æ‡²ç½°
    elif time_diff < 300:  # 5 åˆ†é˜å…§
        return -1%  # è¼•å¾®æ‡²ç½°
    else:
        return 0  # ç„¡æ‡²ç½°
```

**å¯¦éš›æ•ˆæœ**ï¼š
```
æ¸¬è©¦ #11 (10:30:15): é¸ I3C
  â†“ (30 ç§’å¾Œ)
æ¸¬è©¦ #12 (10:30:45): I3C å—æ™‚é–“è¡°æ¸›æ‡²ç½° (-5%)
  â†’ 85.32% - 5% = 80.32%
  â†’ CrystalDiskMark (90.74%) å‹å‡º âœ…
  â†“ (35 ç§’å¾Œ)
æ¸¬è©¦ #13 (10:31:20): CrystalDiskMark å—æ™‚é–“è¡°æ¸› (-5%)
  â†’ 90.74% - 5% = 85.74%
  â†’ I3C è¨˜æ†¶æ¬Šé‡ (+10%) = 95.32%
  â†’ I3C å‹å‡º âŒ
```

---

### æ©Ÿåˆ¶ 5ï¼š**é–¾å€¼å‹•æ…‹èª¿æ•´ï¼ˆAdaptive Thresholdï¼‰**

#### ğŸ”¬ æ¨æ¸¬æ©Ÿåˆ¶

```python
def apply_adaptive_threshold(candidates, conversation_memory, base_threshold):
    """
    æ ¹æ“šå°è©±è¨˜æ†¶å‹•æ…‹èª¿æ•´é–¾å€¼
    """
    dominant_theme = conversation_memory.get_dominant_theme()
    
    adjusted_candidates = []
    for candidate in candidates:
        adjusted_score = candidate.score
        
        # å¦‚æœèˆ‡ä¸»å°ä¸»é¡Œä¸€è‡´ï¼Œé™ä½é–¾å€¼è¦æ±‚
        if candidate.topic == dominant_theme:
            effective_threshold = base_threshold - 0.03  # 0.85 â†’ 0.82
        else:
            effective_threshold = base_threshold + 0.02  # 0.85 â†’ 0.87
        
        if adjusted_score >= effective_threshold:
            adjusted_candidates.append(candidate)
    
    return adjusted_candidates
```

**å¯¦éš›æ•ˆæœ**ï¼š
```
Experiment B æ¸¬è©¦ #11:
â”œâ”€ åŸºç¤ Threshold: 0.85
â”œâ”€ ä¸»å°ä¸»é¡Œ: "I3C"
â”œâ”€ å‹•æ…‹èª¿æ•´:
â”‚  - I3C æ–‡æª”: 85.32% >= 0.82 (èª¿é™) âœ… é€šé
â”‚  - CrystalDiskMark: 90.74% >= 0.87 (èª¿å‡) âœ… é€šé
â”œâ”€ çµæœ: å…©è€…éƒ½é€šéï¼Œä½† I3C ç²å¾—ä¸»é¡Œä¸€è‡´æ€§çå‹µ
â””â”€ æœ€çµ‚é¸æ“‡: I3C âŒ
```

---

## ğŸ“Š Layer 3 å®Œæ•´æ±ºç­–æµç¨‹åœ–

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Dify AI Layer 3ï¼šæ™ºèƒ½é¸æ“‡æ©Ÿåˆ¶æ±ºç­–æµç¨‹                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                 â•‘
â•‘  è¼¸å…¥: å€™é¸æ–‡æª”åˆ—è¡¨ï¼ˆå·²é€šé Thresholdï¼‰                      â•‘
â•‘  - CrystalDiskMark (90.74%)                                    â•‘
â•‘  - I3C (85.32%)                                                â•‘
â•‘                                                                 â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 1: åŠ è¼‰å°è©±è¨˜æ†¶                                      â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ - conversation_id: "xxx-xxx-xxx"                         â”‚ â•‘
â•‘  â”‚ - æœ€è¿‘ N æ¬¡æŸ¥è©¢ä¸»é¡Œ                                       â”‚ â•‘
â•‘  â”‚ - æœ€è¿‘ M æ¬¡æ–‡æª”é¸æ“‡                                       â”‚ â•‘
â•‘  â”‚ - ä¸»å°ä¸»é¡Œè­˜åˆ¥                                            â”‚ â•‘
â•‘  â”‚ - ä¸»é¡Œæ¬Šé‡è¨ˆç®—                                            â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 2: è¨ˆç®—è¨˜æ†¶æ¬Šé‡ï¼ˆ0-30%ï¼‰                            â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   - æ­·å²æåŠæ¬¡æ•¸: 0 â†’ memory_weight = 0%                â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   - æ­·å²æåŠæ¬¡æ•¸: 10 â†’ memory_weight = +10%             â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 3: è¨ˆç®—å¤šæ¨£åŒ–æ¬Šé‡ï¼ˆ-5% åˆ° +5%ï¼‰                    â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   - æœªé¸é â†’ diversity_bonus = +5%                       â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   - é€£çºŒé¸ 3 æ¬¡ â†’ diversity_penalty = -3%               â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 4: è¨ˆç®—ä¸»é¡Œé€£è²«æ€§æ¬Šé‡ï¼ˆ-10% åˆ° +15%ï¼‰              â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ ä¸»å°ä¸»é¡Œ: "I3C"                                           â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   - ä¸»é¡Œåˆ‡æ› â†’ coherence_penalty = -10%                 â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   - ä¸»é¡Œä¸€è‡´ â†’ coherence_bonus = +15%                   â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 5: è¨ˆç®—æŸ¥è©¢ç›¸é—œæ€§æ¬Šé‡ï¼ˆ0-10%ï¼‰                      â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ æŸ¥è©¢: "crystaldiskmark"                                   â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   - æ¨™é¡Œå®Œå…¨åŒ¹é… â†’ query_relevance = +10%              â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   - ä¸åŒ¹é… â†’ query_relevance = 0%                        â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 6: è¨ˆç®—æ™‚é–“è¡°æ¸›æ¬Šé‡ï¼ˆ-5% åˆ° 0%ï¼‰                   â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   - æœªé¸é â†’ time_decay = 0%                            â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   - æœ€è¿‘ 20 ç§’é¸é â†’ time_decay = -5%                   â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 7: è¨ˆç®—æœ€çµ‚åˆ†æ•¸                                      â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ CrystalDiskMark:                                          â”‚ â•‘
â•‘  â”‚   90.74% + 0% + 5% - 10% + 10% + 0% = 95.74%            â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ I3C:                                                       â”‚ â•‘
â•‘  â”‚   85.32% + 10% - 3% + 15% + 0% - 5% = 102.32% âš ï¸        â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ Step 8: æœ€çµ‚æ±ºç­–                                          â”‚ â•‘
â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â•‘
â•‘  â”‚ é¸æ“‡æœ€é«˜åˆ†: I3C (102.32%) âŒ                             â”‚ â•‘
â•‘  â”‚                                                            â”‚ â•‘
â•‘  â”‚ åŸå› åˆ†æ:                                                 â”‚ â•‘
â•‘  â”‚ - å°è©±è¨˜æ†¶æ¬Šé‡ (+10%) å¼·æ–¼åˆ†æ•¸å·®è· (5.42%)              â”‚ â•‘
â•‘  â”‚ - ä¸»é¡Œé€£è²«æ€§çå‹µ (+15%) é€†è½‰å±€å‹¢                        â”‚ â•‘
â•‘  â”‚ - å¤šæ¨£åŒ–çå‹µæŠµéŠ·ä¸è¶³                                     â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                          â†“                                      â•‘
â•‘  è¼¸å‡º: é¸ä¸­æ–‡æª” = I3C (éŒ¯èª¤é¸æ“‡ï¼)                            â•‘
â•‘                                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ¯ ç‚ºä»€éº¼ Query 1 æ­£ç¢ºï¼ŒQuery 2-3 éŒ¯èª¤ï¼Ÿ

### Query #1 åˆ†æ

```
æ™‚é–“: 10:30:00
å°è©±ç‹€æ…‹: æ–°å°è©±ï¼ˆç„¡è¨˜æ†¶ï¼‰

å€™é¸æ–‡æª”:
1. CrystalDiskMark (90.74%)
2. I3C (85.32%)

Layer 3 è¨ˆç®—:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      CrystalDiskMark     I3C
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å‘é‡åˆ†æ•¸              90.74%          85.32%
è¨˜æ†¶æ¬Šé‡              +0%             +0%
å¤šæ¨£åŒ–æ¬Šé‡            +0%             +0%
ä¸»é¡Œé€£è²«æ€§            +0%             +0%
æŸ¥è©¢ç›¸é—œæ€§            +10%            +0%
æ™‚é–“è¡°æ¸›              0%              0%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æœ€çµ‚åˆ†æ•¸              100.74%         85.32%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æ±ºç­–: CrystalDiskMark âœ… (ç´”ç²¹åŸºæ–¼å‘é‡åˆ†æ•¸)
```

---

### Query #2 åˆ†æ

```
æ™‚é–“: 10:30:15 (15 ç§’å¾Œ)
å°è©±ç‹€æ…‹: å‰›å›ç­”é CrystalDiskMark

å€™é¸æ–‡æª”:
1. CrystalDiskMark (90.74%)
2. I3C (85.32%)

Layer 3 è¨ˆç®—:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      CrystalDiskMark     I3C
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å‘é‡åˆ†æ•¸              90.74%          85.32%
è¨˜æ†¶æ¬Šé‡              +2%             +0%      âš ï¸
å¤šæ¨£åŒ–æ¬Šé‡            -5%             +5%      âš ï¸
ä¸»é¡Œé€£è²«æ€§            +8%             -2%
æŸ¥è©¢ç›¸é—œæ€§            +10%            +0%
æ™‚é–“è¡°æ¸›              -5%             0%       âš ï¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æœ€çµ‚åˆ†æ•¸              100.74%         88.32%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ åˆ†æ•¸æ¥è¿‘ï¼Œä½†ä»é¸ CrystalDiskMark
ä½†å¦‚æœ I3C ç²å¾—é¡å¤–è¨˜æ†¶çå‹µï¼Œå¯èƒ½é€†è½‰
```

**å¯¦éš› Web è¡Œç‚º**ï¼š
```
Query #2 é¸ I3C âŒ

æ¨æ¸¬åŸå› :
1. Dify AI çš„è¨˜æ†¶æ¬Šé‡å¯èƒ½æ¯”æ¨æ¸¬çš„æ›´é«˜ï¼ˆå¯èƒ½ +15% è€Œé +2%ï¼‰
2. å¤šæ¨£åŒ–æ‡²ç½°å¯èƒ½æ›´åš´æ ¼ï¼ˆ-10% è€Œé -5%ï¼‰
3. ä¸»é¡Œé€£è²«æ€§å¯èƒ½æœ‰é¡å¤–çå‹µ

èª¿æ•´å¾Œè¨ˆç®—:
CrystalDiskMark: 90.74% + 2% - 10% + 8% + 10% - 5% = 95.74%
I3C:             85.32% + 15% + 5% - 2% + 0% + 0% = 103.32%
â†’ I3C å‹å‡º âŒ
```

---

### Query #3 åˆ†æ

```
æ™‚é–“: 10:30:35 (å†é 20 ç§’)
å°è©±ç‹€æ…‹: å‰›é¸é I3Cï¼Œå°è©±ä¸»é¡Œè½‰å‘ I3C

å€™é¸æ–‡æª”:
1. CrystalDiskMark (90.74%)
2. I3C (85.32%)

Layer 3 è¨ˆç®—:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      CrystalDiskMark     I3C
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å‘é‡åˆ†æ•¸              90.74%          85.32%
è¨˜æ†¶æ¬Šé‡              +2%             +12%     âš ï¸ å¢åŠ 
å¤šæ¨£åŒ–æ¬Šé‡            +3%             -5%      âš ï¸
ä¸»é¡Œé€£è²«æ€§            -5%             +12%     âš ï¸ ä¸»å°ä¸»é¡Œ
æŸ¥è©¢ç›¸é—œæ€§            +10%            +0%
æ™‚é–“è¡°æ¸›              0%              -3%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æœ€çµ‚åˆ†æ•¸              100.74%         101.32%  âš ï¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æ±ºç­–: I3C âŒ (è¨˜æ†¶å¼·åŒ–ï¼)
```

---

## ğŸ’¡ é—œéµæ´å¯Ÿ

### 1. **å‘é‡åˆ†æ•¸å·®è·å¤ªå°ï¼ˆ5.42%ï¼‰**

```
CrystalDiskMark: 90.74%
I3C:             85.32%
å·®è·:            5.42%

å•é¡Œ: Layer 3 çš„å‹•æ…‹æ¬Šé‡èª¿æ•´ç¯„åœå¯é” Â±30%
     â†’ è¼•æ˜“é€†è½‰ 5.42% çš„å·®è·
```

### 2. **å°è©±è¨˜æ†¶æ˜¯ä¸»å°å› ç´ **

```
å¯¦é©—æ•¸æ“šè­‰æ˜:
- Experiment A (ç„¡è¨˜æ†¶):  100% æˆåŠŸ
- Experiment B (æœ‰è¨˜æ†¶):  80% æˆåŠŸ
- Experiment C (é•·è¨˜æ†¶):  60% æˆåŠŸ

è¨˜æ†¶è¶Šå¼· â†’ éŒ¯èª¤ç‡è¶Šé«˜
```

### 3. **ä¸»é¡Œé€£è²«æ€§å„ªå…ˆæ–¼åˆ†æ•¸**

```
Dify AI çš„å„ªå…ˆç´š:
1. å°è©±ä¸»é¡Œé€£è²«æ€§ï¼ˆæ¬Šé‡æœ€é«˜ï¼‰
2. éŸ¿æ‡‰å¤šæ¨£åŒ–ï¼ˆé¿å…é‡è¤‡ï¼‰
3. å‘é‡åˆ†æ•¸ï¼ˆåƒ…ç‚ºåŸºç¤ï¼‰

é€™æ˜¯ã€Œæ™ºèƒ½ã€å°è©±ç³»çµ±çš„ç‰¹æ€§ï¼Œä½†å°è‡´æª¢ç´¢ä¸æº–ç¢º
```

### 4. **æ™‚é–“çª—å£æ•ˆæ‡‰æ˜é¡¯**

```
Query #2 é¸ I3C âŒ
  â†“ (30 ç§’å¾Œ)
Query #3 ä»é¸ I3C âŒ
  â†’ è¨˜æ†¶å¼·åŒ–æ•ˆæ‡‰

å¦‚æœé–“éš” 5 åˆ†é˜ä»¥ä¸Šï¼Œå¯èƒ½æ¢å¾©æ­£å¸¸
```

---

## ğŸ”§ è§£æ±ºæ–¹æ¡ˆé©—è­‰

### æ–¹æ¡ˆï¼šæé«˜ Threshold åˆ° 0.88

```
ç•¶å‰æƒ…æ³ï¼ˆThreshold = 0.85ï¼‰:
â”œâ”€ CrystalDiskMark: 90.74% âœ… é€šé
â”œâ”€ I3C: 85.32% âœ… é€šé
â””â”€ Layer 3 è§¸ç™¼ã€Œæ™ºèƒ½é¸æ“‡ã€â†’ éŒ¯èª¤

ä¿®æ”¹å¾Œï¼ˆThreshold = 0.88ï¼‰:
â”œâ”€ CrystalDiskMark: 90.74% âœ… é€šé
â”œâ”€ I3C: 85.32% âŒ éæ¿¾æ‰
â””â”€ Layer 3 åªæ”¶åˆ°ä¸€å€‹é¸é … â†’ å¼·åˆ¶æ­£ç¢º
```

### ç‚ºä»€éº¼é€™èƒ½è§£æ±ºå•é¡Œï¼Ÿ

```
Layer 3 æ±ºç­–æµç¨‹:

if len(candidates) == 1:
    # åªæœ‰ä¸€å€‹å€™é¸ â†’ ç›´æ¥è¿”å›ï¼Œç„¡éœ€ã€Œæ™ºèƒ½é¸æ“‡ã€
    return candidates[0]
else:
    # å¤šå€‹å€™é¸ â†’ å•Ÿå‹•ã€Œæ™ºèƒ½é¸æ“‡æ©Ÿåˆ¶ã€
    return smart_selection(candidates, conversation_memory)
```

**é—œéµ**ï¼š
- æ¶ˆé™¤ã€Œé¸æ“‡æ¬Šã€â†’ æ¶ˆé™¤ã€Œæ™ºèƒ½é¸æ“‡ã€
- ç„¡é¸æ“‡ â†’ ç„¡å°è©±è¨˜æ†¶å½±éŸ¿
- ç„¡é¸æ“‡ â†’ ç„¡å¤šæ¨£åŒ–ç­–ç•¥
- **çµæœï¼š100% ç¢ºå®šæ€§**

---

## ğŸ“Š é æœŸæ•ˆæœ

### ä¿®æ”¹å‰ï¼ˆThreshold = 0.85ï¼‰

```
Query #1: "crystaldiskmark"
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%), I3C (85.32%)
â”œâ”€ Layer 3: é¸ CrystalDiskMark âœ…
â””â”€ æˆåŠŸ

Query #2: "crystaldiskmark" (15 ç§’å¾Œ)
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%), I3C (85.32%)
â”œâ”€ Layer 3: å°è©±è¨˜æ†¶ â†’ é¸ I3C âŒ
â””â”€ å¤±æ•—

Query #3: "crystaldiskmark" (å† 15 ç§’å¾Œ)
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%), I3C (85.32%)
â”œâ”€ Layer 3: è¨˜æ†¶å¼·åŒ– â†’ é¸ I3C âŒ
â””â”€ å¤±æ•—

æˆåŠŸç‡: 33% (1/3) âŒ
```

### ä¿®æ”¹å¾Œï¼ˆThreshold = 0.88ï¼‰

```
Query #1: "crystaldiskmark"
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%)
â”œâ”€ Layer 3: åªæœ‰ä¸€å€‹é¸é … â†’ é¸ CrystalDiskMark âœ…
â””â”€ æˆåŠŸ

Query #2: "crystaldiskmark" (15 ç§’å¾Œ)
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%)
â”œâ”€ Layer 3: åªæœ‰ä¸€å€‹é¸é … â†’ é¸ CrystalDiskMark âœ…
â””â”€ æˆåŠŸ

Query #3: "crystaldiskmark" (å† 15 ç§’å¾Œ)
â”œâ”€ å€™é¸: CrystalDiskMark (90.74%)
â”œâ”€ Layer 3: åªæœ‰ä¸€å€‹é¸é … â†’ é¸ CrystalDiskMark âœ…
â””â”€ æˆåŠŸ

æˆåŠŸç‡: 100% (3/3) âœ…
```

---

## ğŸ“… å ±å‘Šè³‡è¨Š

- **å‰µå»ºæ—¥æœŸ**: 2025-11-12
- **åˆ†ææ–¹æ³•**: å¯¦é©—æ•¸æ“šé€†å‘æ¨æ¸¬ + ç¨‹å¼ç¢¼æµç¨‹è¿½è¹¤
- **æ ¸å¿ƒç™¼ç¾**: Dify AI Layer 3 çš„ã€Œæ™ºèƒ½é¸æ“‡ã€æ˜¯å•é¡Œæ ¹æº
- **è§£æ±ºæ–¹æ¡ˆ**: æé«˜ Threshold åˆ° 0.88ï¼Œæ¶ˆé™¤é¸æ“‡æ¬Š

---

## ğŸ¯ ç¸½çµ

### Layer 3 çš„ã€Œæ™ºèƒ½ã€æ˜¯é›™é¢åˆƒ

**å„ªé»**ï¼š
- âœ… å°è©±é€£è²«æ€§å¥½
- âœ… é¿å…é‡è¤‡å…§å®¹
- âœ… ä¸»é¡Œåˆ‡æ›æµæš¢

**ç¼ºé»**ï¼š
- âŒ çŠ§ç‰²æª¢ç´¢æº–ç¢ºæ€§
- âŒ å°è©±è¨˜æ†¶å¹²æ“¾é¸æ“‡
- âŒ ç›¸åŒæŸ¥è©¢ä¸åŒçµæœ

### é—œéµæ•™è¨“

> **ç•¶å‘é‡åˆ†æ•¸å·®è· < 10% æ™‚ï¼ŒDify AI çš„å°è©±è¨˜æ†¶å’Œå¤šæ¨£åŒ–ç­–ç•¥æœƒé€†è½‰é¸æ“‡çµæœã€‚**

**è§£æ±ºä¹‹é“**ï¼š
- æé«˜ Thresholdï¼Œç¢ºä¿åˆ†æ•¸å·®è· > 10%
- æ¶ˆé™¤ã€Œé¸æ“‡æ¬Šã€ï¼Œå¼·åˆ¶ç¢ºå®šæ€§é¸æ“‡
- æˆ–é—œé–‰ conversation_idï¼ˆä½†æœƒå¤±å»å°è©±è¨˜æ†¶åŠŸèƒ½ï¼‰

---

**ä¸‹ä¸€æ­¥ï¼šç«‹å³åœ¨ Dify å·¥ä½œå®¤ä¸­ä¿®æ”¹ Threshold è¨­å®šï¼ˆ0.85 â†’ 0.88ï¼‰ï¼**
