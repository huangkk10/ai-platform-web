# ğŸ§ª Markdown æ¸¬è©¦é é¢ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°
é€™æ˜¯ä¸€å€‹å°ˆç‚ºæ¸¬è©¦å’Œèª¿è©¦ Markdown æ¸²æŸ“è€Œè¨­è¨ˆçš„é–‹ç™¼å·¥å…·é é¢ã€‚ä½¿ç”¨èˆ‡ RVT Assistant å®Œå…¨ç›¸åŒçš„ Markdown æ¸²æŸ“é‚è¼¯ï¼Œæ–¹ä¾¿é–‹ç™¼è€…é©—è­‰ Markdown æ ¼å¼æ˜¯å¦æ­£ç¢ºé¡¯ç¤ºã€‚

## ğŸ”— è¨ªå•æ–¹å¼

### URL è·¯å¾‘
```
http://10.10.172.127/dev/markdown-test
```
æˆ–
```
http://localhost/dev/markdown-test
```

### æ¬Šé™è¦æ±‚
- **åƒ…ç®¡ç†å“¡å¯è¨ªå•** (`is_staff = true`)
- éç®¡ç†å“¡è¨ªå•æœƒçœ‹åˆ° "é–‹ç™¼å·¥å…·å­˜å–å—é™" æç¤º
- ä½¿ç”¨ `ProtectedRoute` ä¿è­·

### é¸å–®è¨ªå•
å¦‚æœæ˜¯ç®¡ç†å“¡ç”¨æˆ¶ï¼Œå¯ä»¥åœ¨å´é‚Šæ¬„æ‰¾åˆ°ï¼š
```
é–‹ç™¼å·¥å…· â†’ Markdown æ¸¬è©¦
```

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. é›™é¢æ¿ç·¨è¼¯é è¦½
- **å·¦å´ç·¨è¼¯å™¨**ï¼šç´”æ–‡å­— Markdown ç·¨è¼¯
  - æ”¯æ´å¤šè¡Œè¼¸å…¥
  - ä½¿ç”¨ç­‰å¯¬å­—é«”ï¼ˆConsolas, Monacoï¼‰
  - å¯¦æ™‚å­—æ•¸å’Œè¡Œæ•¸çµ±è¨ˆ
  
- **å³å´é è¦½**ï¼šå³æ™‚ Markdown æ¸²æŸ“
  - ä½¿ç”¨ `ReactMarkdown` æ¸²æŸ“
  - èˆ‡ RVT Assistant ç›¸åŒçš„æ¨£å¼
  - è‡ªå‹•è¡¨æ ¼æ ¼å¼ä¿®å¾©

### 2. è‡ªå‹•ä¿å­˜åŠŸèƒ½
- ç·¨è¼¯å…§å®¹è‡ªå‹•ä¿å­˜åˆ° `localStorage`
- éµåï¼š`dev_markdown_test`
- é˜²æŠ–å»¶é²ï¼š500ms
- åˆ·æ–°é é¢ä¸æœƒä¸Ÿå¤±å…§å®¹

### 3. å·¥å…·æŒ‰éˆ•

#### å·¦å´ç·¨è¼¯å™¨æŒ‰éˆ•ï¼š
- **ğŸ“„ è¼‰å…¥ç¯„ä¾‹**ï¼šè¼‰å…¥é è¨­çš„ Markdown ç¯„ä¾‹
- **ğŸ—‘ï¸ æ¸…é™¤**ï¼šæ¸…ç©ºç·¨è¼¯å™¨å…§å®¹

#### å³å´é è¦½å€æŒ‰éˆ•ï¼š
- **ğŸ“‹ è¤‡è£½ MD**ï¼šè¤‡è£½ Markdown åŸå§‹æ–‡æœ¬åˆ°å‰ªè²¼ç°¿
- **ğŸ’¾ åŒ¯å‡º HTML**ï¼šå°‡æ¸²æŸ“çµæœåŒ¯å‡ºç‚ºå®Œæ•´çš„ HTML æ–‡ä»¶

## ğŸ“ æ”¯æ´çš„ Markdown èªæ³•

### åŸºæœ¬æ ¼å¼
```markdown
**ç²—é«”** *æ–œé«”* ~~åˆªé™¤ç·š~~ `inline code`
```

### æ¨™é¡Œ
```markdown
# H1 æ¨™é¡Œ
## H2 æ¨™é¡Œ
### H3 æ¨™é¡Œ
```

### åˆ—è¡¨
```markdown
- ç„¡åºåˆ—è¡¨é …ç›® 1
- ç„¡åºåˆ—è¡¨é …ç›® 2
  - å­é …ç›®

1. æœ‰åºåˆ—è¡¨é …ç›® 1
2. æœ‰åºåˆ—è¡¨é …ç›® 2

- [ ] å¾…è¾¦äº‹é …
- [x] å·²å®Œæˆäº‹é …
```

### è¡¨æ ¼
```markdown
| æ¬„ä½ 1 | æ¬„ä½ 2 | æ¬„ä½ 3 |
|-------|-------|-------|
| A1    | B1    | C1    |
| A2    | B2    | C2    |

| å·¦å°é½Š | ç½®ä¸­ | å³å°é½Š |
|:------|:----:|------:|
| Left  | Center | Right |
```

### ç¨‹å¼ç¢¼å€å¡Š
````markdown
```python
def hello_world():
    print("Hello, World!")
```
````

### å¼•ç”¨
```markdown
> é€™æ˜¯å¼•ç”¨æ–‡å­—
> å¯ä»¥å¤šè¡Œ
> > å·¢ç‹€å¼•ç”¨
```

### é€£çµ
```markdown
[é€£çµæ–‡å­—](https://example.com)
```

## ğŸ”§ æŠ€è¡“å¯¦ç¾

### æ ¸å¿ƒçµ„ä»¶
```javascript
// ä½¿ç”¨èˆ‡ RVT Assistant ç›¸åŒçš„é…ç½®
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';
import { markdownComponents } from '../components/markdown/MarkdownComponents';
import { fixAllMarkdownTables } from '../utils/markdownTableFixer';

const markdownConfig = {
  remarkPlugins: [remarkGfm],  // GitHub Flavored Markdown
  components: markdownComponents,  // è‡ªå®šç¾©çµ„ä»¶
  disallowedElements: ['script', 'iframe', 'object', 'embed'],
  unwrapDisallowed: true
};
```

### è¡¨æ ¼ä¿®å¾©
```javascript
// è‡ªå‹•ä¿®å¾© Markdown è¡¨æ ¼æ ¼å¼
const processed = fixAllMarkdownTables(markdownText);
```

### CSS æ¨£å¼
- ä½¿ç”¨ `ReactMarkdown.css` çµ±ä¸€æ¨£å¼
- ä½¿ç”¨ `.markdown-content` é¡åˆ¥
- èˆ‡ RVT Assistant å®Œå…¨ä¸€è‡´çš„å¤–è§€

## ğŸ¨ UI è¨­è¨ˆç‰¹è‰²

### æ¼¸å±¤èƒŒæ™¯
- ä¸»é èƒŒæ™¯ï¼šç·šæ€§æ¼¸å±¤ (`#f5f7fa` â†’ `#c3cfe2`)
- å¡ç‰‡æ¨™é¡Œï¼šç´«è‰²æ¼¸å±¤ (`#667eea` â†’ `#764ba2`)

### éŸ¿æ‡‰å¼è¨­è¨ˆ
- å¤§è¢å¹•ï¼ˆâ‰¥992pxï¼‰ï¼šå·¦å³ä¸¦æ’
- å°è¢å¹•ï¼ˆ<992pxï¼‰ï¼šä¸Šä¸‹å †ç–Š
- æ¯å€‹é¢æ¿é«˜åº¦ï¼š500pxï¼ˆç§»å‹•è£ç½®ï¼‰

### æ»¾å‹•æ¢ç¾åŒ–
- å¯¬åº¦ï¼š10px
- é¡è‰²ï¼šèˆ‡ä¸»é¡Œä¸€è‡´çš„ç´«è‰²æ¼¸å±¤
- åœ“è§’è¨­è¨ˆ

### å‹•ç•«æ•ˆæœ
- å¡ç‰‡æ·¡å…¥å‹•ç•«ï¼ˆ300msï¼‰
- æŒ‰éˆ• hover æ•ˆæœ
- å¹³æ»‘éæ¸¡

## ğŸ“Š å¯¦éš›ä½¿ç”¨å ´æ™¯

### 1. æ¸¬è©¦ AI å›æ‡‰æ ¼å¼
ç•¶é–‹ç™¼æ–°çš„ AI Assistant æ™‚ï¼Œå¯ä»¥åœ¨é€™è£¡æ¸¬è©¦ï¼š
- AI ç”Ÿæˆçš„ Markdown æ˜¯å¦æ­£ç¢ºæ¸²æŸ“
- è¡¨æ ¼æ ¼å¼æ˜¯å¦æ­£å¸¸é¡¯ç¤º
- ç¨‹å¼ç¢¼å€å¡Šèªæ³•é«˜äº®æ˜¯å¦æ­£ç¢º

### 2. èª¿è©¦çŸ¥è­˜åº«å…§å®¹
ç·¨è¼¯çŸ¥è­˜åº«ï¼ˆRVT Guide, Protocol Guideï¼‰å‰ï¼š
- é è¦½å…§å®¹çš„æ¸²æŸ“æ•ˆæœ
- ç¢ºèªæ ¼å¼æ˜¯å¦ç¬¦åˆé æœŸ
- æ¸¬è©¦è¤‡é›œçš„ Markdown èªæ³•

### 3. æ¨£å¼å•é¡Œæ’æŸ¥
ç•¶ Markdown é¡¯ç¤ºç•°å¸¸æ™‚ï¼š
- éš”é›¢æ¸¬è©¦ç‰¹å®šèªæ³•
- å°æ¯”é æœŸå’Œå¯¦éš›æ•ˆæœ
- å¿«é€Ÿå®šä½ CSS è¡çª

### 4. æ–‡æª”ç·¨å¯«è¼”åŠ©
æ’°å¯«æŠ€è¡“æ–‡æª”æ™‚ï¼š
- å³æ™‚é è¦½æ’ç‰ˆæ•ˆæœ
- ç¢ºä¿è¡¨æ ¼å°é½Šæ­£ç¢º
- é©—è­‰é€£çµå’Œåœ–ç‰‡å¼•ç”¨

## ğŸš€ å¿«é€Ÿé–‹å§‹

1. **ç™»å…¥ç³»çµ±**ï¼ˆéœ€ç®¡ç†å“¡å¸³è™Ÿï¼‰
2. **è¨ªå•é é¢**ï¼š`/dev/markdown-test`
3. **è¼‰å…¥ç¯„ä¾‹**ï¼šé»æ“Š "è¼‰å…¥ç¯„ä¾‹" æŒ‰éˆ•
4. **é–‹å§‹ç·¨è¼¯**ï¼šåœ¨å·¦å´è¼¸å…¥ Markdown
5. **æŸ¥çœ‹çµæœ**ï¼šå³å´å³æ™‚é¡¯ç¤ºæ¸²æŸ“æ•ˆæœ

## âš™ï¸ é…ç½®èªªæ˜

### è·¯ç”±é…ç½®
```javascript
// frontend/src/App.js
<Route path="/dev/markdown-test" element={
  <ProtectedRoute permission="isStaff" fallbackTitle="é–‹ç™¼å·¥å…·å­˜å–å—é™">
    <DevMarkdownTestPage />
  </ProtectedRoute>
} />
```

### é¸å–®é…ç½®
```javascript
// frontend/src/components/Sidebar.js
const devToolsItem = {
  key: 'dev-tools',
  icon: <ExperimentOutlined />,
  label: 'é–‹ç™¼å·¥å…·',
  children: [
    {
      key: 'markdown-test',
      icon: <FileTextOutlined />,
      label: 'Markdown æ¸¬è©¦',
    },
  ],
};
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ DevMarkdownTestPage.js      # ä¸»é é¢çµ„ä»¶
â”‚   â””â”€â”€ DevMarkdownTestPage.css     # å°ˆç”¨æ¨£å¼
â”œâ”€â”€ components/
â”‚   â””â”€â”€ markdown/
â”‚       â”œâ”€â”€ MarkdownComponents.jsx  # Markdown çµ„ä»¶é…ç½®
â”‚       â””â”€â”€ ReactMarkdown.css       # çµ±ä¸€æ¨£å¼
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ markdownTableFixer.js       # è¡¨æ ¼ä¿®å¾©å·¥å…·
â””â”€â”€ App.js                           # è·¯ç”±é…ç½®
```

## ğŸ” æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼šç„¡æ³•è¨ªå•é é¢
**å¯èƒ½åŸå› **ï¼š
- ç”¨æˆ¶ä¸æ˜¯ç®¡ç†å“¡ï¼ˆ`is_staff = false`ï¼‰
- æœªç™»å…¥ç³»çµ±

**è§£æ±ºæ–¹æ³•**ï¼š
- ä½¿ç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥
- ç¢ºèªç”¨æˆ¶è³‡æ–™ `is_staff = true`

### å•é¡Œ 2ï¼šæ¸²æŸ“çµæœèˆ‡é æœŸä¸ç¬¦
**å¯èƒ½åŸå› **ï¼š
- Markdown èªæ³•éŒ¯èª¤
- è¡¨æ ¼åˆ†éš”ç·šæ ¼å¼ä¸æ­£ç¢º
- CSS æ¨£å¼è¡çª

**è§£æ±ºæ–¹æ³•**ï¼š
- æª¢æŸ¥ Markdown èªæ³•æ˜¯å¦æ­£ç¢º
- ä½¿ç”¨ç¯„ä¾‹ä½œç‚ºåƒè€ƒ
- ç¢ºèªæ˜¯å¦ä½¿ç”¨äº†ä¸æ”¯æ´çš„èªæ³•

### å•é¡Œ 3ï¼šå…§å®¹ä¸Ÿå¤±
**å¯èƒ½åŸå› **ï¼š
- æ¸…é™¤äº†ç€è¦½å™¨ localStorage
- ä½¿ç”¨ç„¡ç—•æ¨¡å¼ç€è¦½

**è§£æ±ºæ–¹æ³•**ï¼š
- é‡æ–°è¼‰å…¥ç¯„ä¾‹
- ä½¿ç”¨ "è¤‡è£½ MD" åŠŸèƒ½å‚™ä»½å…§å®¹
- ä½¿ç”¨ "åŒ¯å‡º HTML" ä¿å­˜çµæœ

## ğŸ“š ç›¸é—œæ–‡æª”

- **RVT Assistant å¯¦ç¾**ï¼š`frontend/src/pages/RvtAssistantChatPage.js`
- **Markdown çµ„ä»¶**ï¼š`frontend/src/components/markdown/MarkdownComponents.jsx`
- **MessageFormatter**ï¼š`frontend/src/components/chat/MessageFormatter.jsx`
- **è¡¨æ ¼ä¿®å¾©å·¥å…·**ï¼š`frontend/src/utils/markdownTableFixer.js`

## ğŸ¯ æœªä¾†æ“´å±•å¯èƒ½æ€§

### é€²éšåŠŸèƒ½
- [ ] èªæ³•é«˜äº®ç·¨è¼¯å™¨ï¼ˆCodeMirrorï¼‰
- [ ] åˆ†å±åŒæ­¥æ»¾å‹•
- [ ] Markdown å¿«æ·éµæ”¯æ´
- [ ] åŒ¯å‡ºç‚º PDF
- [ ] åŒ¯å‡ºç‚º Word
- [ ] æ­·å²ç‰ˆæœ¬è¨˜éŒ„
- [ ] ç¯„æœ¬åº«ç®¡ç†
- [ ] åœ–ç‰‡ä¸Šå‚³å’Œç®¡ç†

### å”ä½œåŠŸèƒ½
- [ ] åˆ†äº«é è¦½é€£çµ
- [ ] å”ä½œç·¨è¼¯
- [ ] è©•è«–åŠŸèƒ½

## ğŸ“… æ›´æ–°è¨˜éŒ„

**2025-10-21**ï¼š
- âœ… åˆå§‹ç‰ˆæœ¬å®Œæˆ
- âœ… é›™é¢æ¿ç·¨è¼¯é è¦½åŠŸèƒ½
- âœ… è‡ªå‹•ä¿å­˜åˆ° localStorage
- âœ… å·¥å…·æŒ‰éˆ•ï¼ˆè¼‰å…¥ç¯„ä¾‹ã€æ¸…é™¤ã€è¤‡è£½ã€åŒ¯å‡ºï¼‰
- âœ… æ¬Šé™ä¿è­·ï¼ˆåƒ…ç®¡ç†å“¡ï¼‰
- âœ… å´é‚Šæ¬„é¸å–®æ•´åˆ
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆ
- âœ… èˆ‡ RVT Assistant ç›¸åŒçš„æ¸²æŸ“é‚è¼¯

---

**ğŸ“ ä½œè€…**ï¼šAI Platform Team  
**ğŸ¯ ç”¨é€”**ï¼šé–‹ç™¼å·¥å…· - Markdown æ¸¬è©¦å’Œèª¿è©¦  
**ğŸ” æ¬Šé™**ï¼šç®¡ç†å“¡å°ˆç”¨  
**ğŸ“ ä½ç½®**ï¼š`/dev/markdown-test`
