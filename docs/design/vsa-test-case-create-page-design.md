# VSA æ¸¬è©¦æ¡ˆä¾‹æ–°å¢ - ç¨ç«‹é é¢è¨­è¨ˆæ–¹æ¡ˆ

## ğŸ“‹ è¨­è¨ˆæ¦‚è¿°

å°‡ç›®å‰ Modal å½ˆçª—ä¸­çš„æ–°å¢æ¸¬è©¦æ¡ˆä¾‹è¡¨å–®ï¼Œæ”¹é€ ç‚º**ç¨ç«‹çš„å…¨é é¢**ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ¶é«”é©—å’Œæ›´å¤§çš„æ“ä½œç©ºé–“ã€‚

---

## ğŸ¯ è¨­è¨ˆç›®æ¨™

### å„ªé»åˆ†æ

âœ… **æ›´å¤§çš„æ“ä½œç©ºé–“**
- è¡¨å–®ä¸å— Modal å¯¬åº¦é™åˆ¶
- å¯ä»¥é¡¯ç¤ºæ›´å¤šè¼”åŠ©è³‡è¨Šå’Œæç¤º
- é©åˆé•·æ–‡æœ¬å…§å®¹ï¼ˆå•é¡Œã€ç­”æ¡ˆï¼‰è¼¸å…¥

âœ… **æ›´å¥½çš„ç”¨æˆ¶é«”é©—**
- ä¸ç”¨æ“”å¿ƒ Modal é®æ“‹å…¶ä»–å…§å®¹
- å¯ä»¥æœ‰ç¨ç«‹çš„é é¢æ¨™é¡Œå’Œå°èˆª
- æ”¯æ´ç€è¦½å™¨å‰é€²/å¾Œé€€

âœ… **ç¨ç«‹çš„ URL è·¯å¾‘**
- å¯ä»¥ç›´æ¥åˆ†äº«æ–°å¢é é¢é€£çµ
- æ”¯æ´æ›¸ç±¤æ”¶è—
- ä¾¿æ–¼æ¬Šé™æ§åˆ¶

âœ… **æ›´å¥½çš„è¡¨å–®é©—è­‰é«”é©—**
- æœ‰æ›´å¤šç©ºé–“é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
- å¯ä»¥ä½¿ç”¨æ­¥é©Ÿå¼è¡¨å–®ï¼ˆStep Formï¼‰
- æ”¯æ´å³æ™‚é è¦½

---

## ğŸ—ï¸ é é¢æ¶æ§‹è¨­è¨ˆ

### æ–¹æ¡ˆ Aï¼šå–®é è¡¨å–®ï¼ˆæ¨è–¦ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›åˆ—è¡¨    æ–°å¢ VSA æ¸¬è©¦æ¡ˆä¾‹           [å„²å­˜] â”‚ â† TopHeader
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“ åŸºæœ¬è³‡è¨Š                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ æ¸¬è©¦å•é¡Œ *                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ [TextArea - å¤§æ–‡æœ¬æ¡†]             â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚ â”‚
â”‚  â”‚  â”‚ é›£åº¦ç­‰ç´š â”‚ [ä¸‹æ‹‰é¸å–®: ä¸­ç­‰]           â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ¯ VSA æ¸¬è©¦é…ç½®                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ æœŸæœ›ç­”æ¡ˆ *                        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ [TextArea - å¤§æ–‡æœ¬æ¡†]             â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚ ç­”æ¡ˆé—œéµå­— * [è¼¸å…¥æ¡†] [+ æ·»åŠ ]   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ å·²æ·»åŠ : [tag1] [tag2] ...   â”‚   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚  æ»¿åˆ†: [100]                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  âš™ï¸ é€²éšé¸é …                              â”‚ â”‚
â”‚  â”‚  æ¨™ç±¤: [mode="tags" è¼¸å…¥æ¡†]              â”‚ â”‚
â”‚  â”‚  ä¾†æº: [è¼¸å…¥æ¡†]                           â”‚ â”‚
â”‚  â”‚  å‚™è¨»: [TextArea]                         â”‚ â”‚
â”‚  â”‚  å•Ÿç”¨ç‹€æ…‹: [Switch]                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  [å–æ¶ˆ]                              [å„²å­˜æ¸¬è©¦æ¡ˆä¾‹] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–¹æ¡ˆ Bï¼šæ­¥é©Ÿå¼è¡¨å–®ï¼ˆé€²éšç‰ˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† è¿”å›åˆ—è¡¨    æ–°å¢ VSA æ¸¬è©¦æ¡ˆä¾‹                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Step 1: åŸºæœ¬è³‡è¨Š â†’ Step 2: VSA é…ç½® â†’ Step 3: å®Œæˆ â”‚
â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”  â—‹â”â”â”â”â”â”â”â”â”â”â”â”â”  â—‹â”â”â”â”â”â”â”â”    â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“ æ­¥é©Ÿ 1ï¼šè¼¸å…¥åŸºæœ¬è³‡è¨Š                  â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  æ¸¬è©¦å•é¡Œ *                               â”‚ â”‚
â”‚  â”‚  [å¤§æ–‡æœ¬æ¡†]                               â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚  é›£åº¦ç­‰ç´š *                               â”‚ â”‚
â”‚  â”‚  [ä¸‹æ‹‰é¸å–®]                               â”‚ â”‚
â”‚  â”‚                                           â”‚ â”‚
â”‚  â”‚               [ä¸Šä¸€æ­¥]      [ä¸‹ä¸€æ­¥ â†’]    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æª”æ¡ˆçµæ§‹

### æ–°å»ºæª”æ¡ˆ

```
frontend/src/pages/dify-benchmark/
â”œâ”€â”€ DifyTestCasePage.js           # ç¾æœ‰çš„åˆ—è¡¨é é¢
â”œâ”€â”€ DifyTestCaseCreatePage.js     # ğŸ†• æ–°å¢æ¸¬è©¦æ¡ˆä¾‹é é¢ï¼ˆå–®é è¡¨å–®ï¼‰
â”œâ”€â”€ DifyTestCaseEditPage.js       # ğŸ†• ç·¨è¼¯æ¸¬è©¦æ¡ˆä¾‹é é¢ï¼ˆå¯å…±ç”¨çµ„ä»¶ï¼‰
â””â”€â”€ components/                    # ğŸ†• å…±ç”¨çµ„ä»¶ç›®éŒ„
    â”œâ”€â”€ TestCaseFormBasic.jsx      # åŸºæœ¬è³‡è¨Šè¡¨å–®çµ„ä»¶
    â”œâ”€â”€ TestCaseFormVSA.jsx        # VSA é…ç½®è¡¨å–®çµ„ä»¶
    â”œâ”€â”€ TestCaseFormAdvanced.jsx   # é€²éšé¸é …è¡¨å–®çµ„ä»¶
    â””â”€â”€ KeywordManager.jsx         # é—œéµå­—ç®¡ç†çµ„ä»¶ï¼ˆç¨ç«‹ï¼‰
```

---

## ğŸ›£ï¸ è·¯ç”±é…ç½®

### App.js è·¯ç”±æ·»åŠ 

```javascript
// App.js ä¸­æ·»åŠ æ–°è·¯ç”±

// Dify Benchmark é é¢
import DifyTestCasePage from './pages/dify-benchmark/DifyTestCasePage';
import DifyTestCaseCreatePage from './pages/dify-benchmark/DifyTestCaseCreatePage'; // ğŸ†•
import DifyTestCaseEditPage from './pages/dify-benchmark/DifyTestCaseEditPage';     // ğŸ†•

// ... åœ¨ Routes ä¸­æ·»åŠ 
<Route path="/benchmark/dify/test-cases" element={
  <ProtectedRoute permission="isStaff" fallbackTitle="Benchmark ç³»çµ±å­˜å–å—é™">
    <DifyTestCasePage />
  </ProtectedRoute>
} />

{/* ğŸ†• æ–°å¢æ¸¬è©¦æ¡ˆä¾‹é é¢ */}
<Route path="/benchmark/dify/test-cases/create" element={
  <ProtectedRoute permission="isStaff" fallbackTitle="Benchmark ç³»çµ±å­˜å–å—é™">
    <DifyTestCaseCreatePage />
  </ProtectedRoute>
} />

{/* ğŸ†• ç·¨è¼¯æ¸¬è©¦æ¡ˆä¾‹é é¢ */}
<Route path="/benchmark/dify/test-cases/edit/:id" element={
  <ProtectedRoute permission="isStaff" fallbackTitle="Benchmark ç³»çµ±å­˜å–å—é™">
    <DifyTestCaseEditPage />
  </ProtectedRoute>
} />
```

### é é¢æ¨™é¡Œé…ç½®

```javascript
// App.js - getPageTitle å‡½æ•¸ä¸­æ·»åŠ 
case '/benchmark/dify/test-cases/create':
  return 'æ–°å¢ VSA æ¸¬è©¦æ¡ˆä¾‹';

default:
  if (pathname.startsWith('/benchmark/dify/test-cases/edit/')) {
    const id = pathname.split('/').pop();
    return { text: 'ç·¨è¼¯ VSA æ¸¬è©¦æ¡ˆä¾‹', id: id };
  }
```

### é ‚éƒ¨æŒ‰éˆ•é…ç½®

```javascript
// App.js - getExtraActions å‡½æ•¸ä¸­æ·»åŠ 
if (pathname === '/benchmark/dify/test-cases/create' || 
    pathname.startsWith('/benchmark/dify/test-cases/edit/')) {
  return (
    <div style={{ display: 'flex', gap: '12px' }}>
      <Button
        icon={<ArrowLeftOutlined />}
        onClick={() => navigate('/benchmark/dify/test-cases')}
        size="large"
      >
        è¿”å›åˆ—è¡¨
      </Button>
      <Button
        type="primary"
        size="large"
        icon={<SaveOutlined />}
        onClick={() => {
          window.dispatchEvent(new CustomEvent('test-case-form-save'));
        }}
      >
        å„²å­˜æ¸¬è©¦æ¡ˆä¾‹
      </Button>
    </div>
  );
}
```

---

## ğŸ’» æ ¸å¿ƒä»£ç¢¼å¯¦ä½œ

### 1. DifyTestCaseCreatePage.jsï¼ˆå®Œæ•´é é¢ï¼‰

```javascript
import React, { useState, useEffect } from 'react';
import { Form, Input, Select, Button, Card, Divider, Space, Tag, message } from 'antd';
import { useNavigate } from 'react-router-dom';
import { PlusOutlined, DeleteOutlined } from '@ant-design/icons';
import difyBenchmarkApi from '../../services/difyBenchmarkApi';
import KeywordManager from './components/KeywordManager';

const { TextArea } = Input;
const { Option } = Select;

const DifyTestCaseCreatePage = () => {
  const navigate = useNavigate();
  const [form] = Form.useForm();
  const [loading, setLoading] = useState(false);
  const [keywords, setKeywords] = useState([]);

  // ç›£è½ä¿å­˜äº‹ä»¶ï¼ˆä¾†è‡ª TopHeader æŒ‰éˆ•ï¼‰
  useEffect(() => {
    const handleSaveEvent = () => {
      form.submit();
    };

    window.addEventListener('test-case-form-save', handleSaveEvent);
    return () => {
      window.removeEventListener('test-case-form-save', handleSaveEvent);
    };
  }, [form]);

  // è™•ç†è¡¨å–®æäº¤
  const handleSubmit = async (values) => {
    setLoading(true);
    try {
      const payload = {
        ...values,
        answer_keywords: keywords, // ä½¿ç”¨ state ä¸­çš„é—œéµå­—
        test_type: 'vsa',
      };

      await difyBenchmarkApi.createDifyTestCase(payload);
      message.success('æ¸¬è©¦æ¡ˆä¾‹æ–°å¢æˆåŠŸ');
      navigate('/benchmark/dify/test-cases'); // è¿”å›åˆ—è¡¨é 
    } catch (error) {
      console.error('æ–°å¢å¤±æ•—:', error);
      message.error(`æ–°å¢å¤±æ•—: ${error.response?.data?.detail || error.message}`);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div style={{ 
      padding: '24px', 
      maxWidth: '1200px', 
      margin: '0 auto',
      background: '#f5f5f5'
    }}>
      {/* åŸºæœ¬è³‡è¨Šå¡ç‰‡ */}
      <Card 
        title="ğŸ“ åŸºæœ¬è³‡è¨Š" 
        style={{ marginBottom: '24px' }}
      >
        <Form
          form={form}
          layout="vertical"
          onFinish={handleSubmit}
          initialValues={{
            difficulty_level: 'medium',
            is_active: true,
            max_score: 100,
          }}
        >
          <Form.Item
            name="question"
            label="æ¸¬è©¦å•é¡Œ"
            rules={[{ required: true, message: 'è«‹è¼¸å…¥æ¸¬è©¦å•é¡Œ' }]}
          >
            <TextArea
              rows={6}
              placeholder="è¼¸å…¥æ¸¬è©¦å•é¡Œå…§å®¹..."
              maxLength={1000}
              showCount
            />
          </Form.Item>

          <Form.Item
            name="difficulty_level"
            label="é›£åº¦ç­‰ç´š"
            rules={[{ required: true, message: 'è«‹é¸æ“‡é›£åº¦ç­‰ç´š' }]}
          >
            <Select placeholder="é¸æ“‡é›£åº¦" size="large">
              <Option value="easy">ç°¡å–®</Option>
              <Option value="medium">ä¸­ç­‰</Option>
              <Option value="hard">å›°é›£</Option>
            </Select>
          </Form.Item>
        </Form>
      </Card>

      {/* VSA æ¸¬è©¦é…ç½®å¡ç‰‡ */}
      <Card 
        title="ğŸ¯ VSA æ¸¬è©¦é…ç½®" 
        style={{ marginBottom: '24px' }}
      >
        <Form.Item
          name="expected_answer"
          label="æœŸæœ›ç­”æ¡ˆ"
          rules={[{ required: true, message: 'è«‹è¼¸å…¥æœŸæœ›ç­”æ¡ˆ' }]}
          tooltip="å®šç¾©æ¨™æº–ç­”æ¡ˆæˆ–ç­”æ¡ˆç¯„ä¾‹ï¼Œç”¨æ–¼è©•ä¼° AI å›æ‡‰å“è³ª"
        >
          <TextArea
            rows={8}
            placeholder="è¼¸å…¥æœŸæœ›çš„ç­”æ¡ˆå…§å®¹..."
            maxLength={2000}
            showCount
          />
        </Form.Item>

        {/* é—œéµå­—ç®¡ç†çµ„ä»¶ */}
        <KeywordManager 
          keywords={keywords} 
          onChange={setKeywords}
        />

        <Form.Item
          name="max_score"
          label="æ»¿åˆ†"
          tooltip="æ¸¬è©¦æ¡ˆä¾‹çš„æœ€é«˜åˆ†æ•¸"
        >
          <Input 
            type="number" 
            min={1} 
            max={1000} 
            size="large"
            style={{ width: '200px' }}
          />
        </Form.Item>
      </Card>

      {/* é€²éšé¸é …å¡ç‰‡ */}
      <Card 
        title="âš™ï¸ é€²éšé¸é …" 
        style={{ marginBottom: '24px' }}
      >
        <Form.Item
          name="tags"
          label="æ¨™ç±¤"
          tooltip="å¤šå€‹æ¨™ç±¤å¯ç”¨é€—è™Ÿåˆ†éš”æˆ–æŒ‰ Enter æ–°å¢"
        >
          <Select
            mode="tags"
            size="large"
            placeholder="è¼¸å…¥æ¨™ç±¤ï¼ˆä¾‹å¦‚ï¼šKingston, Linux, è‘‰å¡ï¼‰"
            tokenSeparators={[',']}
          />
        </Form.Item>

        <Form.Item label="ä¾†æº" name="source">
          <Input 
            size="large"
            placeholder="ä¾‹å¦‚ï¼šå¯¦éš›æ¸¬è©¦æ¡ˆä¾‹ã€æ–‡æª”ç¯„ä¾‹ã€å®¢æˆ¶åé¥‹" 
          />
        </Form.Item>

        <Form.Item name="notes" label="å‚™è¨»">
          <TextArea
            rows={4}
            placeholder="å…¶ä»–èªªæ˜æˆ–æ³¨æ„äº‹é …..."
            maxLength={500}
            showCount
          />
        </Form.Item>

        <Form.Item 
          name="is_active" 
          label="å•Ÿç”¨ç‹€æ…‹" 
          valuePropName="checked"
        >
          <Switch checkedChildren="å•Ÿç”¨" unCheckedChildren="åœç”¨" />
        </Form.Item>
      </Card>

      {/* åº•éƒ¨æ“ä½œæŒ‰éˆ• */}
      <div style={{ 
        textAlign: 'right', 
        padding: '16px 0',
        background: '#fff',
        position: 'sticky',
        bottom: 0,
        borderTop: '1px solid #f0f0f0',
        zIndex: 10
      }}>
        <Space size="middle">
          <Button 
            size="large"
            onClick={() => navigate('/benchmark/dify/test-cases')}
          >
            å–æ¶ˆ
          </Button>
          <Button 
            type="primary" 
            size="large"
            loading={loading}
            onClick={() => form.submit()}
          >
            å„²å­˜æ¸¬è©¦æ¡ˆä¾‹
          </Button>
        </Space>
      </div>
    </div>
  );
};

export default DifyTestCaseCreatePage;
```

### 2. KeywordManager.jsxï¼ˆé—œéµå­—ç®¡ç†çµ„ä»¶ï¼‰

```javascript
import React, { useState } from 'react';
import { Input, Button, Tag, Space } from 'antd';
import { PlusOutlined, DeleteOutlined } from '@ant-design/icons';

const KeywordManager = ({ keywords = [], onChange }) => {
  const [keywordInput, setKeywordInput] = useState('');

  // æ·»åŠ é—œéµå­—
  const handleAddKeyword = () => {
    const trimmed = keywordInput.trim();
    if (trimmed && !keywords.includes(trimmed)) {
      onChange([...keywords, trimmed]);
      setKeywordInput('');
    }
  };

  // ç§»é™¤é—œéµå­—
  const handleRemoveKeyword = (keyword) => {
    onChange(keywords.filter(k => k !== keyword));
  };

  // æ¸…ç©ºæ‰€æœ‰é—œéµå­—
  const handleClearAll = () => {
    onChange([]);
  };

  return (
    <div style={{ marginBottom: '24px' }}>
      <label style={{ 
        display: 'block', 
        marginBottom: '8px',
        fontWeight: 500 
      }}>
        <span style={{ color: 'red' }}>* </span>
        ç­”æ¡ˆé—œéµå­—
      </label>

      {/* è¼¸å…¥å€åŸŸ */}
      <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>
        <Input
          size="large"
          value={keywordInput}
          onChange={(e) => setKeywordInput(e.target.value)}
          onPressEnter={handleAddKeyword}
          placeholder="è¼¸å…¥é—œéµå­—å¾ŒæŒ‰ Enter æˆ–é»æ“Šæ·»åŠ ..."
          style={{ flex: 1 }}
        />
        <Button 
          type="primary" 
          size="large"
          icon={<PlusOutlined />} 
          onClick={handleAddKeyword}
        >
          æ·»åŠ 
        </Button>
      </div>

      {/* é—œéµå­—å±•ç¤ºå€åŸŸ */}
      <div style={{ 
        padding: '16px', 
        background: '#fafafa', 
        borderRadius: '8px',
        border: '1px solid #d9d9d9',
        minHeight: '100px'
      }}>
        <div style={{ 
          display: 'flex', 
          justifyContent: 'space-between', 
          alignItems: 'center',
          marginBottom: keywords.length > 0 ? '12px' : '0'
        }}>
          <span style={{ color: '#666', fontSize: '14px' }}>
            å·²æ·»åŠ çš„é—œéµå­— ({keywords.length})
          </span>
          {keywords.length > 0 && (
            <Button 
              type="link" 
              danger 
              size="small"
              onClick={handleClearAll}
              icon={<DeleteOutlined />}
            >
              æ¸…ç©ºå…¨éƒ¨
            </Button>
          )}
        </div>

        {keywords.length > 0 ? (
          <Space size={[8, 8]} wrap>
            {keywords.map((keyword, index) => (
              <Tag 
                key={index} 
                closable 
                onClose={() => handleRemoveKeyword(keyword)}
                color="purple"
                style={{ 
                  fontSize: '14px', 
                  padding: '8px 12px',
                }}
              >
                {keyword}
              </Tag>
            ))}
          </Space>
        ) : (
          <div style={{ 
            textAlign: 'center', 
            color: '#bfbfbf',
            padding: '24px 0',
            fontSize: '14px'
          }}>
            å°šæœªæ·»åŠ é—œéµå­—
          </div>
        )}
      </div>

      {/* æç¤ºæ–‡å­— */}
      <div style={{ 
        marginTop: '8px', 
        color: '#8c8c8c', 
        fontSize: '12px'
      }}>
        ğŸ’¡ æç¤ºï¼šè¼¸å…¥é—œéµå­—å¾ŒæŒ‰ <Tag style={{ margin: '0 4px' }}>Enter</Tag> ä¹Ÿå¯å¿«é€Ÿæ·»åŠ 
      </div>
    </div>
  );
};

export default KeywordManager;
```

### 3. ä¿®æ”¹åˆ—è¡¨é é¢æŒ‰éˆ•ï¼ˆDifyTestCasePage.jsï¼‰

```javascript
// ä¿®æ”¹ã€Œæ–°å¢æ¸¬è©¦æ¡ˆä¾‹ã€æŒ‰éˆ•ï¼Œå°èˆªåˆ°æ–°é é¢
<Button
  type="primary"
  icon={<PlusOutlined />}
  onClick={() => navigate('/benchmark/dify/test-cases/create')}
>
  æ–°å¢æ¸¬è©¦æ¡ˆä¾‹
</Button>

// ä¿®æ”¹é ‚éƒ¨ã€Œæ–°å¢å•é¡Œã€æŒ‰éˆ•äº‹ä»¶
const handleCreateEvent = () => {
  console.log('æ”¶åˆ°æ–°å¢å•é¡Œäº‹ä»¶ - å°èˆªåˆ°æ–°å¢é é¢');
  navigate('/benchmark/dify/test-cases/create');
};
```

---

## ğŸ¨ æ¨£å¼å„ªåŒ–å»ºè­°

### CSS æ¨£å¼ï¼ˆå¯é¸ï¼‰

```css
/* DifyTestCaseCreatePage.css */

.test-case-create-page {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
  background: #f5f5f5;
  min-height: calc(100vh - 64px);
}

.form-card {
  margin-bottom: 24px;
  border-radius: 8px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.form-card .ant-card-head-title {
  font-size: 18px;
  font-weight: 600;
}

.sticky-footer {
  position: sticky;
  bottom: 0;
  background: #fff;
  padding: 16px 24px;
  border-top: 1px solid #f0f0f0;
  text-align: right;
  z-index: 10;
  box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
}

/* å¤§æ–‡æœ¬æ¡†å„ªåŒ– */
.test-case-create-page .ant-input-textarea {
  font-size: 15px;
  line-height: 1.6;
}

/* é—œéµå­—æ¨™ç±¤å„ªåŒ– */
.keyword-tag {
  font-size: 14px;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
}

.keyword-tag:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
```

---

## ğŸ“Š å„ªç¼ºé»å°æ¯”

### å°æ¯”è¡¨æ ¼

| ç‰¹æ€§ | Modal å½ˆçª— | ç¨ç«‹é é¢ |
|------|-----------|---------|
| **æ“ä½œç©ºé–“** | å—é™ï¼ˆå›ºå®šå¯¬åº¦ 900pxï¼‰ | âœ… ç„¡é™åˆ¶ï¼ˆå¯é” 1200px+ï¼‰ |
| **æ–‡æœ¬è¼¸å…¥** | è¼ƒå°çš„ TextArea | âœ… æ›´å¤§çš„è¼¸å…¥å€åŸŸ |
| **ç”¨æˆ¶é«”é©—** | éœ€è¦æ»¾å‹• Modal | âœ… è‡ªç„¶çš„é é¢æ»¾å‹• |
| **URL åˆ†äº«** | âŒ ç„¡æ³•ç›´æ¥åˆ†äº« | âœ… å¯åˆ†äº«å‰µå»ºé é¢ URL |
| **ç€è¦½å™¨å°èˆª** | âŒ ä¸æ”¯æ´å‰é€²/å¾Œé€€ | âœ… æ”¯æ´ç€è¦½å™¨å°èˆª |
| **è¡¨å–®é©—è­‰** | ç©ºé–“æœ‰é™ | âœ… å¯é¡¯ç¤ºæ›´å¤šæç¤º |
| **é–‹ç™¼æˆæœ¬** | ä½ï¼ˆå·²å¯¦ç¾ï¼‰ | ä¸­ï¼ˆéœ€è¦æ–°å»ºé é¢ï¼‰ |
| **ç¶­è­·æˆæœ¬** | ä¸­ï¼ˆèˆ‡åˆ—è¡¨é è€¦åˆï¼‰ | âœ… ä½ï¼ˆçµ„ä»¶è§£è€¦ï¼‰ |
| **éŸ¿æ‡‰å¼è¨­è¨ˆ** | è¼ƒé›£å¯¦ç¾ | âœ… æ˜“æ–¼å¯¦ç¾ |

---

## ğŸš€ å¯¦ä½œæ­¥é©Ÿï¼ˆå¾…åŸ·è¡Œï¼‰

### Phase 1ï¼šå‰µå»ºåŸºç¤é é¢ï¼ˆ2-3 å°æ™‚ï¼‰
1. âœ… å‰µå»º `DifyTestCaseCreatePage.js`
2. âœ… å‰µå»º `KeywordManager.jsx` çµ„ä»¶
3. âœ… åœ¨ App.js ä¸­æ·»åŠ è·¯ç”±
4. âœ… é…ç½®é é¢æ¨™é¡Œå’Œé ‚éƒ¨æŒ‰éˆ•

### Phase 2ï¼šè¡¨å–®åŠŸèƒ½å¯¦ä½œï¼ˆ2 å°æ™‚ï¼‰
1. âœ… è¤‡è£½ç¾æœ‰è¡¨å–®é‚è¼¯
2. âœ… å¯¦ä½œè¡¨å–®æäº¤
3. âœ… å¯¦ä½œè¡¨å–®é©—è­‰
4. âœ… å¯¦ä½œé—œéµå­—ç®¡ç†

### Phase 3ï¼šæ¨£å¼å„ªåŒ–ï¼ˆ1 å°æ™‚ï¼‰
1. âœ… èª¿æ•´å¡ç‰‡å¸ƒå±€
2. âœ… å„ªåŒ–é–“è·å’Œå­—é«”
3. âœ… æ·»åŠ éŸ¿æ‡‰å¼è¨­è¨ˆ
4. âœ… æ·»åŠ å‹•ç•«æ•ˆæœ

### Phase 4ï¼šæ•´åˆæ¸¬è©¦ï¼ˆ1 å°æ™‚ï¼‰
1. âœ… æ¸¬è©¦æ–°å¢åŠŸèƒ½
2. âœ… æ¸¬è©¦å°èˆªæµç¨‹
3. âœ… æ¸¬è©¦è¡¨å–®é©—è­‰
4. âœ… è·¨ç€è¦½å™¨æ¸¬è©¦

### Phase 5ï¼šç·¨è¼¯é é¢ï¼ˆå¯é¸ï¼Œ2 å°æ™‚ï¼‰
1. âœ… å‰µå»º `DifyTestCaseEditPage.js`
2. âœ… å¯¦ä½œè¼‰å…¥ç¾æœ‰è³‡æ–™
3. âœ… å¯¦ä½œæ›´æ–°åŠŸèƒ½
4. âœ… æ·»åŠ è·¯ç”±å’Œå°èˆª

---

## âœ… é©—æ”¶æ¨™æº–

### åŠŸèƒ½é©—æ”¶
- [ ] å¯ä»¥å¾åˆ—è¡¨é å°èˆªåˆ°æ–°å¢é é¢
- [ ] è¡¨å–®æ‰€æœ‰æ¬„ä½æ­£å¸¸é¡¯ç¤º
- [ ] é—œéµå­—æ·»åŠ /ç§»é™¤/æ¸…ç©ºåŠŸèƒ½æ­£å¸¸
- [ ] è¡¨å–®é©—è­‰æ­£ç¢ºï¼ˆå¿…å¡«æ¬„ä½æª¢æŸ¥ï¼‰
- [ ] æäº¤æˆåŠŸå¾Œè¿”å›åˆ—è¡¨é 
- [ ] é ‚éƒ¨ã€Œè¿”å›åˆ—è¡¨ã€æŒ‰éˆ•æ­£å¸¸
- [ ] é ‚éƒ¨ã€Œå„²å­˜ã€æŒ‰éˆ•è§¸ç™¼è¡¨å–®æäº¤

### UX é©—æ”¶
- [ ] é é¢è¼‰å…¥é€Ÿåº¦ < 1 ç§’
- [ ] è¡¨å–®è¼¸å…¥æµæš¢ç„¡å¡é “
- [ ] éŒ¯èª¤è¨Šæ¯æ¸…æ™°æ˜“æ‡‚
- [ ] æŒ‰éˆ• loading ç‹€æ…‹æ­£ç¢º
- [ ] æˆåŠŸ/å¤±æ•—è¨Šæ¯æ­£ç¢ºé¡¯ç¤º

### éŸ¿æ‡‰å¼é©—è­‰
- [ ] 1920x1080 é¡¯ç¤ºæ­£å¸¸
- [ ] 1366x768 é¡¯ç¤ºæ­£å¸¸
- [ ] å¹³æ¿ï¼ˆ768pxï¼‰é¡¯ç¤ºæ­£å¸¸

---

## ğŸ¯ æ¨è–¦æ–¹æ¡ˆ

### å»ºè­°ä½¿ç”¨ï¼šæ–¹æ¡ˆ Aï¼ˆå–®é è¡¨å–®ï¼‰

**ç†ç”±**ï¼š
1. âœ… å¯¦ä½œç°¡å–®ï¼Œé–‹ç™¼æˆæœ¬ä½
2. âœ… ç”¨æˆ¶å·²ç†Ÿæ‚‰è¡¨å–®çµæ§‹
3. âœ… ä¸éœ€è¦å­¸ç¿’æ–°çš„äº’å‹•æ¨¡å¼
4. âœ… æ˜“æ–¼ç¶­è­·å’Œæ“´å±•
5. âœ… èˆ‡ç¾æœ‰ Modal é‚è¼¯ä¸€è‡´

**é è¨ˆå·¥æ™‚**ï¼š6-8 å°æ™‚å®Œæ•´å¯¦ä½œ

---

## ğŸ“ å¾ŒçºŒå„ªåŒ–å»ºè­°

### çŸ­æœŸå„ªåŒ–ï¼ˆ1-2 é€±å…§ï¼‰
- [ ] æ·»åŠ è¡¨å–®è‡ªå‹•å„²å­˜ï¼ˆlocalStorageï¼‰
- [ ] æ·»åŠ é›¢é–‹é é¢ç¢ºèªæç¤º
- [ ] å„ªåŒ–é—œéµå­—è¼¸å…¥ï¼ˆæ™ºèƒ½æç¤ºï¼‰
- [ ] æ·»åŠ è¡¨å–®é è¦½åŠŸèƒ½

### é•·æœŸå„ªåŒ–ï¼ˆ1-2 å€‹æœˆå…§ï¼‰
- [ ] æ”¹ç‚ºæ­¥é©Ÿå¼è¡¨å–®ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] æ·»åŠ æ‰¹é‡åŒ¯å…¥åŠŸèƒ½
- [ ] æ·»åŠ ç¯„æœ¬åŠŸèƒ½
- [ ] æ·»åŠ è¡¨å–®æ­·å²è¨˜éŒ„

---

## ğŸ“… è¨­è¨ˆæ–‡æª”è³‡è¨Š

**æ–‡æª”å‰µå»ºæ—¥æœŸ**ï¼š2024-11-27  
**è¨­è¨ˆè€…**ï¼šAI Assistant  
**ç‹€æ…‹**ï¼šè¨­è¨ˆéšæ®µï¼ˆå¾…åŸ·è¡Œï¼‰  
**é è¨ˆå®Œæˆæ™‚é–“**ï¼š1 å€‹å·¥ä½œæ—¥

---

**æ³¨æ„äº‹é …**ï¼š
- æ­¤æ–‡æª”ç‚ºè¨­è¨ˆæ–¹æ¡ˆï¼Œ**å°šæœªåŸ·è¡Œä»»ä½•ç¨‹å¼ç¢¼ä¿®æ”¹**
- å»ºè­°å…ˆèˆ‡åœ˜éšŠè¨è«–å¾Œå†é–‹å§‹å¯¦ä½œ
- å¯ä»¥æ ¹æ“šå¯¦éš›éœ€æ±‚èª¿æ•´è¨­è¨ˆç´°ç¯€
