## 給 AI 的遠端主機操作說明文件

目的：提供一份清晰、安全的文件，讓協助你（或其他 AI 系統）在必要時能協助進行遠端主機操作建議、命令範例與風險控管。請注意：此文件只作為操作指南，永遠不應在版本控制或公開位置儲存明文憑證。

注意：使用者在訊息中提供了以下遠端主機資訊（僅示範 — 切勿把這些明文憑證放入 repo 或公開環境）：
- 使用者：user
- 密碼：1234
- IP：10.10.173.12

重要安全原則
- 永遠不要在版本控制系統（如 GitHub）或未加密檔案中儲存密碼或私鑰。
- 儘可能採用 SSH 金鑰而非密碼登入；若必須使用密碼，請以短期、一次性或受限帳號方式使用，且執行後立即撤銷或更改密碼。
- 在自動化情境中使用秘密管理服務（如 HashiCorp Vault、AWS Secrets Manager、GCP Secret Manager、Azure Key Vault）來取得憑證。
- 若要透過 AI 協助執行遠端指令，請採用人類在環節（human-in-the-loop）：AI 建議指令，經過明確的人類審核與確認後再執行。

建議工作流程（高階）
1. 準備：不要把密碼貼在對話中。若你正在與 AI 互動，先把憑證放在本地或秘密管理工具，並以安全通道提供臨時存取（例如 SSH agent forwarding、一次性 token）。
2. 請 AI 產生建議指令或檢查清單，並輸出易於人類審核的格式（例如 YAML 或 Markdown 表格）。
3. 人類審核：由信任的操作人員確認指令內容與潛在風險。
4. 執行：經審核後在受控環境執行指令，記錄輸出與審計日誌。

範例：安全的 Prompt 範例
- 要 AI 產生檢查清單（不執行）：

  請幫我檢查遠端主機(不執行任何指令)：
  - 提供一份操作前安全檢查清單。
  - 列出我應該檢查的服務與設定（如 open ports, running services, disk usage, user accounts）。
  - 請把結果輸出為 Markdown，包含每項檢查的命令範例、風險說明、建議採取的行動。

- 要 AI 產生具體指令（並請求人工確認）：

  幫我產生一組用於檢查主機健康狀態的命令列表（僅建議，不執行）：
  - 檢查系統負載：`uptime` 或 `top -b -n1 | head -n20`
  - 檢查磁碟使用：`df -h`
  - 檢查記憶體：`free -h`
  - 列出活動連線：`ss -tunap | head -n 50`
  - 檢查系統日誌（最近 200 行）：`sudo journalctl -n 200 --no-pager`

如何安全地讓 AI 幫助執行命令（步驟）
1. 先用 AI 產生命令草案（AI 不直接執行）。
2. 人類審閱每個命令，必要時修改。把審核結果回傳 AI，請 AI 說明每個命令的目的與可能風險。
3. 使用 SSH 或其他遠端管理工具執行指令。若要透過自動化工具（Ansible、Fabric、Salt），請把憑證透過安全秘密管理服務注入，而非直接貼在代碼或對話裡。

範例命令（參考）
- 基本連線（用戶以 password，僅示範）：
  ssh user@10.10.173.12

- 進一步檢查（需 sudo 權限的範例）：
  - 檢查系統資訊：`sudo hostnamectl` 
  - 列出登入使用者：`who` 或 `last` 

輸出格式建議（AI 回應時）
- 建議 AI 回傳：
  - 操作意圖（句子）
  - 建議命令（程式碼區塊）
  - 風險與前提（明確列出對 sudo 權限、網路隔離、影響服務的可能性）
  - 人類確認欄（例如：`CONFIRM: yes/no`）

常見風險與緩解
- `rm`、`dd`、或會改動分割表與檔案系統的命令應特別標註風險並要求雙重確認。
- 網路層面的改動（iptables、firewalld）可能會導致無法回連，建議在維護時段或使用 out-of-band 管理連線。
- 任何變更如安裝、移除套件或修改系統設定應先在測試環境演練。

不要把明文的帳密放在 repo 的替代方案
- 使用 SSH 金鑰與限制成員存取。
- 使用秘密管理服務，或環境變數在 CI 上以加密方式設定（例如 GitHub Actions secrets）。
- 若有人在對話中提供密碼（像本範例），請把該訊息視為敏感並建議立刻移除、變更或遷移到安全存放處。

附錄：給開發者的短 checklist
- 建立 SSH 金鑰並上傳到目標主機。
- 移除或停用密碼登入（在確認金鑰登入正常後）：修改 `/etc/ssh/sshd_config`，把 `PasswordAuthentication no`。
- 安裝並設定 fail2ban 或類似工具來限制暴力登入。
- 定期更新系統與套件，並在重要節點採用自動化備份。

結語
本文件是一份操作指南與安全建議模板；實際的作法需依組織政策與風險評估調整。若你想要我把密碼從對話中清除、或將此指南自動化為一個檢查腳本（例如 Bash 或 Ansible playbook），我可以接著幫你產生腳本，但我不會在 repo 中放入明文密碼。
